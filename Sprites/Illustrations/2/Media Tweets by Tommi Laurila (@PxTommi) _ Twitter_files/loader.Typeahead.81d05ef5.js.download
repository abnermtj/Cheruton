(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{"3A2y":function(e,t,s){"use strict";var r=s("zrOZ");t.a=(e,t)=>{const s=Object(r.a)(Array.isArray(t)?t:[t]);return Object.keys(e).reduce((t,r)=>(s.has(r)||(t[r]=e[r]),t),{})}},"3EFP":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return o})),s.d(t,"e",(function(){return i})),s.d(t,"f",(function(){return c}));const r="ArrowDown",n="ArrowUp",a="Enter",o="Escape",i="ESC",c="Tab"},"4e/K":function(e,t,s){"use strict";s.r(t),s.d(t,"TypeaheadInput",(function(){return T})),s.d(t,"styles",(function(){return k}));s("IAdD");var r=s("KEM+"),n=s.n(r),a=s("3EFP"),o=s("ERkP"),i=s("3XMw"),c=s.n(i),l=s("VwDm"),d=s("oQhu"),h=s("WPfJ"),u=s("7nmT"),p=s.n(u),m=s("Es6L"),f=(s("AxOO"),s("OEYw")),_=s("rHpw"),y=_.a.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}}),b=(s("aWzz"),s("k/Ka")),S=s("MWbm"),g=s("xoZN"),I=s("6OUF"),v=s("pf9B"),E=s("cHvH"),x=s("oEoC"),w=s("GZwR");const R=c.a.f065ba8c,C=Object(d.a)(e=>({bottom:0,paddingBottom:`calc(2.5 * ${_.a.theme.spaces.jumbo})`,position:"fixed",top:e+"px",transform:[{translate3d:"0,0,0"}]})),O=e=>Object(b.a)("form",Object.assign({},e,{action:"#",style:[y.initial,k.wrapper]}));let D=1;class T extends o.Component{constructor(e,t){super(e),n()(this,"_render",({windowWidth:e})=>{const{alwaysOpen:t,disableClearButton:s,inputStyle:r,placeholder:n,rounded:a,renderInSearchField:i,shouldAutoFocus:c,shouldFocusOnClear:d,style:h,testID:u}=this.props,p=this.state.showTypeaheadDropdown||t;return o.createElement(S.a,{onLayout:this._handleLayout,ref:this._setRootContainerNode,style:[k.root,h]},o.createElement(g.a,{onKeyDown:this._handleKeyDown,style:k.keydownInputListener},o.createElement(O,{accessibilityLabel:n,accessibilityRole:"search",onSubmit:this._handleFormSubmit},o.createElement(S.a,{ref:this._setInputContainerNode,style:r},o.createElement(I.a,{Icon:l.a,ariaActiveDescendant:this.state.ariaDescendantId,ariaAutocomplete:"list",ariaExpanded:p,ariaLabel:R,ariaOwns:this._dropdownDomId,ariaRole:"combobox",autoComplete:"off",autoCorrect:!1,autoFocus:c,contentBelow:i&&i(),focusOnClear:d,onChange:this._handleInputChange,onClear:this._handleInputClear,onFocus:this._handleInputFocus,onLayout:this._handleInputLayoutChanged,placeholder:n,ref:this._setInputRef,returnKeyType:"search",styleType:a?"pill":"selection",testID:u,value:this.state.query,withClearButton:!s&&this.state.showTypeaheadDropdown})),o.createElement(S.a,{style:k.typeaheadContainer},p?this._renderDropdown(e):null))))}),n()(this,"_renderDropdown",e=>{const{filter:t,getItemDisabledMessage:s,getItemIsDisabled:r,getTopicExactMatch:n,getUserExactMatch:a,injectedItems:i,isModal:c,maxEvents:l,maxTopics:d,renderEmptyState:h,renderUserDecoration:u,selectedItems:p,shouldDeferPrefetch:y,source:b,withFixedPositioning:S,withSectionDivider:g,renderNoResultsState:I}=this.props,v=e>=_.a.theme.breakpoints.medium||Object(m.a)(),{dropdownOffset:E,query:x}=this.state,w=c?k.modalDropdown:[k.dropdown,!v&&S&&E?C(E):null,v&&k.wideModeDropdown],R={ariaDescendantId:this.state.ariaDescendantId,domId:this._dropdownDomId,onDismiss:this._handleOnEmptyStateDismiss,onItemFocusChanged:this._handleItemFocusChanged,onRef:this._handleEmptyStateRef,style:w};return h&&!x?h(R):o.createElement(f.a,{ariaDescendantId:this.state.ariaDescendantId,domId:this._dropdownDomId,filter:t,getItemDisabledMessage:s,getItemIsDisabled:r,getTopicExactMatch:n,getUserExactMatch:a,injectedItems:i,maxEvents:l,maxTopics:d,onItemClick:this._handleItemClick,onItemFocusChanged:this._handleItemFocusChanged,onRef:this._handleTypeaheadRef,query:x,renderNoResultsState:x?I:void 0,renderUserDecoration:u,selectedItems:p,shouldDeferPrefetch:y,source:b,style:w,withSectionDivider:g})}),n()(this,"_dismissDropdown",()=>{this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss()}),n()(this,"_handleOnEmptyStateDismiss",()=>{this._dismissDropdown(),this._inputRef&&this._inputRef.blur()}),n()(this,"_handleLayout",()=>{this._updatePosition()}),n()(this,"_handleInputLayoutChanged",()=>{this._updatePosition()}),n()(this,"_updatePosition",()=>{if(!this._inputContainerNode)return;const{bottom:e}=this._inputContainerNode.getBoundingClientRect();e!==this.state.dropdownOffset&&this.setState({dropdownOffset:e})}),n()(this,"_handleTypeaheadRef",e=>{this._typeaheadRef=e}),n()(this,"_handleEmptyStateRef",e=>{this._emptyStateRef=e}),n()(this,"_setRootContainerNode",e=>{this._rootContainerNode=p.a.findDOMNode(e)}),n()(this,"_setInputRef",e=>{this._inputRef=e}),n()(this,"_setInputContainerNode",e=>{this._inputContainerNode=p.a.findDOMNode(e),this._inputContainerNode&&this._updatePosition()}),n()(this,"_handleFocusChange",e=>{const t=v.a.getCount()>0;this._rootContainerNode&&this._rootContainerNode.contains(e.target)||t||this.state.showTypeaheadDropdown&&this._dismissDropdown()}),n()(this,"_handleKeyDown",e=>{const{key:t}=e,{showTypeaheadDropdown:s}=this.state;if(Object(x.e)(e)){if(t===a.a)return this._focusNext(),void e.preventDefault();if(t===a.b)return this._focusPrevious(),void e.preventDefault();if(t===a.d)return this._dismissDropdown(),void e.preventDefault();if(t!==a.f)return t===a.c&&this._hasFocusedItem()?(this._selectFocusedItem(),void e.preventDefault()):void(s||this.setState({showTypeaheadDropdown:!0}));this._dismissDropdown()}}),n()(this,"_handleItemFocusChanged",()=>{this.setState({ariaDescendantId:Object(x.b)()})}),n()(this,"_handleInputClear",()=>{this.setQuery("")}),n()(this,"_handleInputFocus",()=>{this.setState({showTypeaheadDropdown:!0}),this._updatePosition(),this.props.onFocus&&this.props.onFocus()}),n()(this,"_handleInputChange",e=>{this.setQuery(e.target.value),this._updatePosition()}),n()(this,"_handleFormSubmit",e=>{e.preventDefault(),e.stopPropagation(),this._inputRef&&this._inputRef.blur(),this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss(),this.props.onSubmit&&this.props.onSubmit()}),n()(this,"_handleItemClick",(e,t)=>{const{shouldClearOnSelect:s,shouldFocusOnClear:r,onDismiss:n,onItemClick:a}=this.props,o=s?"":this.state.query;this.setState({showTypeaheadDropdown:!1}),this._inputRef&&(s&&r?this._inputRef.focus():this._inputRef.blur()),this.setQuery(o),n&&n(),a&&a(e,t)}),n()(this,"_hasFocusedItem",()=>{const e=this._emptyStateRef||this._typeaheadRef;return e&&e.hasFocusedItem()}),n()(this,"_selectFocusedItem",()=>{const e=this._emptyStateRef||this._typeaheadRef;e&&e.selectFocusedItem()}),n()(this,"_focusNext",()=>{const e=this._emptyStateRef||this._typeaheadRef;e&&e.focusNext()}),n()(this,"_focusPrevious",()=>{const e=this._emptyStateRef||this._typeaheadRef;e&&e.focusPrevious()}),this.state={ariaDescendantId:Object(x.b)(),query:e.initialValue,showTypeaheadDropdown:!1},this._dropdownDomId="typeaheadDropdown-"+D,D+=1}UNSAFE_componentWillReceiveProps(e){this.props.initialValue!==e.initialValue&&this.setQuery(e.initialValue)}componentDidMount(){window.document.addEventListener("click",this._handleFocusChange,!0)}componentWillUnmount(){window.document.removeEventListener("click",this._handleFocusChange,!0)}render(){return o.createElement(E.a,null,this._render)}focus(){this._inputRef&&this._inputRef.focus()}setQuery(e){this.setState({query:e}),this.props.onQueryChange&&this.props.onQueryChange(e)}}n()(T,"defaultProps",{disableClearButton:!1,filter:[w.a.Users,w.a.Topics],initialValue:"",withSectionDivider:!0});const k=_.a.create(e=>({root:{flex:1,flexDirection:"column",position:"relative",zIndex:h.d+1},typeaheadContainer:{flex:1,position:"relative"},keydownInputListener:{flex:1},dropdown:{backgroundColor:e.colors.cellBackground,left:0,right:0,overflowY:"auto",overscrollBehavior:"contain",position:"absolute",top:0,WebkitOverflowScrolling:"touch"},modalDropdown:{backgroundColor:e.colors.cellBackground,flex:1,minHeight:300,position:"relative",overflowY:"auto",overscrollBehavior:"auto",WebkitOverflowScrolling:"touch"},wideModeDropdown:{borderRadius:e.borderRadii.medium,boxShadow:e.boxShadows.medium,minHeight:100,maxHeight:`calc(80vh - ${e.componentDimensions.appBarHeight})`},wrapper:{alignItems:"stretch",flex:1}}));t.default=T},"6OUF":function(e,t,s){"use strict";s.d(t,"a",(function(){return I}));s("IAdD"),s("kYxP");var r=s("97Jx"),n=s.n(r),a=s("LdEA"),o=s.n(a),i=s("KEM+"),c=s.n(i),l=(s("aWzz"),s("ERkP")),d=s("t62R"),h=s("/yvb"),u=s("Lsrn"),p=s("k/Ka");const m=(e={})=>Object(p.a)("svg",Object.assign({},e,{style:[u.a.root,e.style],viewBox:"0 0 15 15"}),l.createElement("g",null,l.createElement("path",{d:"M8.914 7.5l5.793-5.793c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0L7.5 6.086 1.707.293c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L6.086 7.5.293 13.293c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L7.5 8.914l5.793 5.793c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L8.914 7.5z"})));m.metadata={width:15,height:15};var f=m,_=s("oQhu"),y=s("rHpw"),b=s("aITJ"),S=s("MWbm"),g=s("ioan");class I extends l.Component{constructor(...e){super(...e),c()(this,"_blurOnBackspaceKeyUpForKaiOS",!1),c()(this,"state",{isFocused:!1}),c()(this,"getContainerStyle",()=>{const{styleType:e,multiline:t,invalid:s}=this.props,{isFocused:r}=this.state;return"pill"===e?[!s&&!r&&E.transparent,!r&&O.fadedGrayColor,!t&&v.infinite,O.root,s&&E.invalid,!s&&r&&E.focused,r&&O.transparentColor,t&&v.round]:[E.none,O.root,O.fadedGrayColor]}),c()(this,"_getTextInputStyle",Object(_.a)(e=>[x.root,e])),c()(this,"_handleBlur",e=>{const{onBlur:t}=this.props;this.setState({isFocused:!1}),t&&t(e)}),c()(this,"_handleClear",e=>{this.props.focusOnClear&&this.focus(),this._textInput&&this._textInput.clear()}),c()(this,"_handleChange",e=>{const{onChange:t}=this.props,{isFocused:s}=this.state;s||this.setState({isFocused:!0}),t&&t(e)}),c()(this,"_handleFocus",e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t(e)}),c()(this,"_handleKeyPress",e=>{const{multiline:t,onKeyPress:s,onSubmitEditing:r}=this.props;s&&s(e),e.isDefaultPrevented()||"Enter"!==e.key||e.shiftKey||t||!r||(e.preventDefault(),r(e))}),c()(this,"_handleKeyDown",e=>{const{onKeyDown:t}=this.props,s=0===this.getValue().length;b.a.isKaiOS()&&"Backspace"===e.key&&s?this._blurOnBackspaceKeyUpForKaiOS=s:t&&t(e)}),c()(this,"_handleKeyUp",e=>{const{onKeyUp:t}=this.props;b.a.isKaiOS()&&"Backspace"===e.key&&this._blurOnBackspaceKeyUpForKaiOS&&(e.preventDefault(),this.blur()),t&&t(e)}),c()(this,"_setTextInputRef",e=>{this._textInput=e}),c()(this,"_setRichTextInputRef",e=>{this._richTextInput=e})}render(){const{appTextSize:e,emojiPickerButton:t,onLayout:s,contentAbove:r,contentBelow:n,editable:a,style:o,richTextInputContext:i,withClearButton:c}=this.props;return l.createElement(S.a,{onBlur:this._handleBlur,onFocus:this._handleFocus,onLayout:s,style:[this.getContainerStyle(),!a&&O.disabled,o]},r,l.createElement(S.a,{style:O.textInput},this._renderIcon(),l.createElement(d.c,{size:e,style:O.appText},i?this._renderRichTextInput():this._renderTextInput()),l.createElement(S.a,{style:[C.root,t&&C.withEmojiPicker]},this._renderCloseButton(),this._renderEmojiPicker(),c&&this._renderClearButton())),n)}_renderIcon(){const{Icon:e,iconStyle:t}=this.props,{isFocused:s}=this.state,r=[w.root,s&&w.focused,t];return e?l.createElement(S.a,{style:C.leftIcon},l.createElement(e,{style:r})):null}_renderTextInput(){const e=this.props,{inputStyle:t}=e,s=o()(e,["Icon","appTextSize","focusOnClear","handleReturn","iconStyle","inputStyle","invalid","keyCommandHandlers","onLayout","onSubmitEditing","closeButton","contentAbove","contentBelow","emojiPickerButton","richTextInputContext","style","styleType","withClearButton"]);return l.createElement(l.Fragment,null,b.a.isEdge()?l.createElement("style",null,"input[type=text]::-ms-clear { display: none; }"):null,l.createElement(g.a,n()({},s,{onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,placeholderTextColor:y.a.theme.colors.deepGray,ref:this._setTextInputRef,style:this._getTextInputStyle(t)})))}_renderRichTextInput(){const{ariaAutocomplete:e,ariaControls:t,ariaActiveDescendant:s,autoFocus:r,ariaLabel:n,inputStyle:a,keyCommandHandlers:o,numberOfLines:i,maxNumberOfLines:c,multiline:d,onFilesAdded:h,placeholder:u,positionCursorAtEnd:p,richTextInputContext:m,handleReturn:f,testID:_}=this.props,{dismissComposerCommandName:y,editorState:b,element:g,sendTweetCommandName:I}=m||{},v=[x.root,x.rich];return g&&b?l.createElement(S.a,{style:[x.richContainer,a]},l.createElement(g,{ariaActiveDescendant:s,ariaAutocomplete:e,ariaControls:t,ariaLabel:n,autoFocus:r,dismissComposerCommandName:y,editorState:b,handleReturn:f,keyCommandHandlers:o,maxNumberOfLines:c,multiline:d,numberOfLines:i,onBlur:this._handleBlur,onChange:this._handleChange,onFilesAdded:h,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,placeholder:u,positionCursorAtEnd:p,ref:this._setRichTextInputRef,sendTweetCommandName:I,style:v,testID:_})):null}_renderClearButton(){const e=l.createElement(h.a,{accessible:!1,icon:l.createElement(f,{style:R.icon}),onPress:this._handleClear,size:"smallCompact",style:R.root,type:"primary"});return this.getValue()?e:l.createElement(S.a,null)}_renderEmojiPicker(){const{emojiPickerButton:e}=this.props;return e?l.createElement(S.a,null,e):null}_renderCloseButton(){const{closeButton:e}=this.props;return e?l.createElement(S.a,{style:C.closeButton},e):null}applyFinalValue(e){this.focus(),window.requestAnimationFrame(()=>{this.blur(),e(this.getValue())})}blur(){this._richTextInput&&this._richTextInput.blur(),this._textInput&&this._textInput.blur()}focus(){this._richTextInput&&this._richTextInput.focus(),this._textInput&&this._textInput.focus()}getValue(){const{richTextInputContext:e,value:t}=this.props;return e?this._richTextInput&&this._richTextInput.value()||t||"":this._textInput&&this._textInput.getValue()||t||""}getTextInputHeight(){const{richTextInputContext:e}=this.props,t=2*parseInt(y.a.theme.spaces.xSmall,10),s=2*parseInt(y.a.theme.borderWidths.small,10);return e?this._richTextInput&&this._richTextInput.getOffsetHeight()+t+s:this._textInput&&this._textInput.getOffsetHeight()+s}}c()(I,"defaultProps",{appTextSize:"normal",autoComplete:"on",styleType:"pill",autoCorrect:!0,editable:!0,focusOnClear:!0,withClearButton:!1}),I.propTypes={};const v=y.a.create(e=>({infinite:{borderRadius:e.borderRadii.infinite},round:{borderRadius:`calc(${e.borderRadii.large} + ${e.borderWidths.small} * 2)`},none:{borderRadius:0}})),E=y.a.create(e=>({transparent:{borderColor:e.colors.transparent,borderStyle:"solid",borderWidth:e.borderWidths.small},focused:{borderColor:e.colors.primary,borderStyle:"solid",borderWidth:e.borderWidths.small},invalid:{borderColor:e.colors.red,borderStyle:"solid",borderWidth:e.borderWidths.small},none:{borderWidth:0}})),x=y.a.create(e=>({root:{backgroundColor:"transparent",borderRadius:0,borderWidth:0,boxSizing:"border-box",color:"inherit",outlineStyle:"none",fontFamily:"inherit",fontSize:"inherit",padding:e.spaces.xSmall,textAlign:"inherit"},richContainer:{width:"100%",padding:e.spaces.xSmall},rich:{padding:0}})),w=y.a.create(e=>({root:{color:e.colors.deepGray,minWidth:e.spaces.large,paddingLeft:e.spaces.xSmall},focused:{color:e.colors.primary}})),R=y.a.create(e=>({root:{borderWidth:0,marginRight:e.spaces.xSmall},icon:{width:"10px",height:"10px",color:e.colors.cellBackground}})),C=y.a.create(e=>({root:{display:"flex",justifyContent:"center"},withEmojiPicker:{display:"flex",justifyContent:"flex-end",flexDirection:"column"},closeButton:{flexGrow:1},leftIcon:{display:"flex",justifyContent:"center"}})),O=y.a.create(e=>({root:{flexDirection:"column",flexGrow:1,flexShrink:1,justifyContent:"center"},disabled:{cursor:"default",opacity:.8},fadedGrayColor:{backgroundColor:e.colors.fadedGray},transparentColor:{backgroundColor:"transparent"},textInput:{flexDirection:"row"},appText:{display:"flex",flexGrow:1}}))},"72nz":function(e,t,s){"use strict";s.r(t),s.d(t,"SearchBoxContainer",(function(){return we}));s("IAdD"),s("WNMA"),s("MvUL");var r=s("97Jx"),n=s.n(r),a=s("KEM+"),o=s.n(a),i=s("ERkP"),c=s("E2gn"),l=s("wtjx"),d=s("rxPX");var h=Object(d.a)().propsFromActions(()=>({addQuery:l.a})).withAnalytics({component:"search_box"}),u=s("3XMw"),p=s.n(u),m=s("8jkQ"),f=s("u3ZE"),_=s("rRIm"),y=s("lnti"),b=s("0KEI"),S=s("hqKg"),g=s("kGix"),I=s("3IPs"),v=s("G6rE"),E=s("k49u"),x=s("J4ZH"),w=s("v4XE");const R=e=>Object(E.c)(e,E.a.GenericUserNotFound)||Object(E.c)(e,E.a.OtherUserSuspended)||Object(E.c)(e,E.a.AddressBookLookupNotFound);var C=Object(d.a)().propsFromState(()=>{const e=Object(S.createSelector)(l.g,v.e.selectFetchStatuses,(e,t)=>{const s=Object(y.a)(e.map(e=>e.user&&e.user.id));return Object(x.a)(s.map(e=>({id:e,fetchStatus:t[e]})),e=>e.fetchStatus)}),t=Object(S.createSelector)(e,e=>(e[g.a.FAILED]||[]).map(e=>e.id)),s=Object(S.createSelector)(e,v.e.selectErrors,(e,t)=>(e[g.a.FAILED]||[]).filter(({id:e})=>R(t[e]||{})).map(e=>e.id)),r=Object(S.createSelector)(e,v.e.selectErrors,(e,t)=>{const s=(e[g.a.FAILED]||[]).filter(({id:e})=>!R(t[e]||{}));return(e[g.a.LOADING]||[]).length>0?g.a.LOADING:(e[g.a.LOADED]||[]).length>0?g.a.LOADED:s.length>0?g.a.FAILED:g.a.NONE}),n=Object(S.createSelector)(l.g,e=>e.map(e=>Object.assign({},e,{category:I.b.RecentSearch}))),a=Object(S.createSelector)(w.d,e=>e.map(e=>({keyword:{query:e.query},savedSearchId:e.id_str,category:I.b.SavedSearch})));return{isRecentSearchDataLoaded:l.e,recentSearches:n,usersFetchStatus:r,invalidRecentSearchUserIds:s,failedRecentSearchUserIds:t,savedSearches:a}}).adjustStateProps(({isRecentSearchDataLoaded:e,recentSearches:t,usersFetchStatus:s,invalidRecentSearchUserIds:r,failedRecentSearchUserIds:n,savedSearches:a})=>{const o=!t.filter(({user:e})=>e&&r.indexOf(e.id)<0).length,i=s!==g.a.LOADING&&e&&o?g.a.LOADED:s;return{failedRecentSearchUserIds:n,invalidRecentSearchUserIds:r,recentSearches:t,fetchStatus:i,savedSearches:a}}).propsFromActions(()=>({clearAll:l.b,createLocalApiErrorHandler:Object(b.d)("SEARCH_ONE_CLICK"),deleteSavedSearch:w.a,fetchRecentSearchesIfNeeded:l.c,fetchSavedSearchesIfNeeded:w.b,fetchUsersIfNeeded:v.e.fetchManyIfNeeded,removeQuery:l.d})).withAnalytics({element:"typeahead"}),O=s("sYRn"),D=s("v//M"),T=s("7nmT"),k=s.n(T),A=s("Rp9C");s("kYxP");const F=(e,t)=>v.e.select(e,t.id);var j=Object(d.a)().propsFromState(()=>({user:F})),P=s("hOZg"),N=s("/yvb"),L=s("IMA+"),U=s("rHpw");const M=i.createElement(P.a,null),B=p.a.e68b09b4;class q extends i.Component{UNSAFE_componentWillMount(){const{onRef:e}=this.props;e&&e(this)}componentWillUnmount(){const{onRef:e}=this.props;e&&e(void 0)}componentDidUpdate(e){const{onRef:t}=this.props;e.onRef&&e.onRef!==t&&e.onRef(void 0),t&&t!==e.onRef&&t(this)}render(){const{user:e,onRemove:t}=this.props;if(!e)return null;const s=i.createElement(N.a,{accessibilityLabel:B,icon:M,onPress:t,size:"small",type:"text"});return i.createElement(L.a,{avatarSize:"xLarge",avatarUri:e.profile_image_url_https,decoration:s,displayMode:"UserCompact",isProtected:e.protected,isVerified:e.verified,name:e.name,screenName:e.screen_name,style:W.cell,userId:e.id_str,withLink:!1})}get searchItemData(){return this.props.user?{category:I.b.RecentSearch,link:this.props.user.screen_name,query:this.props.id,recentSearchType:I.a.User}:null}}var H=j(q);const W=U.a.create(e=>({cell:{paddingHorizontal:0,paddingVertical:0}}));var K=s("I7xG"),G=s("j7Bv"),V=s("5mJL"),z=s("t62R"),Q=s("hiGS"),Y=s("VwDm");const X=i.createElement(P.a,null),$=i.createElement(Q.a,null);class J extends i.Component{constructor(...e){super(...e),o()(this,"_getButtonType",Object(K.a)(this,e=>e.category,e=>e===I.b.SavedSearch?"destructiveText":"text")),o()(this,"_getRemoveIcon",Object(K.a)(this,e=>e.category,e=>e===I.b.SavedSearch?$:X))}render(){const{query:e,onRemove:t}=this.props,s=i.createElement(G.a,{Icon:Y.a,color:"neutral",size:"xLarge",style:Z.searchIcon});return i.createElement(V.a,{avatarCell:s,avatarSize:"xLarge",cellStyle:Z.bodyColumn},i.createElement(z.c,{numberOfLines:1,withHashflags:!0},e),i.createElement(N.a,{accessibilityLabel:"",icon:this._getRemoveIcon(),onPress:t,size:"small",type:this._getButtonType()}))}get searchItemData(){const{category:e,query:t}=this.props;return{category:e,query:t,recentSearchType:e===I.b.RecentSearch?I.a.Keyword:void 0}}}const Z=U.a.create(e=>({bodyColumn:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},searchIcon:{marginRight:e.spaces.xSmall}}));var ee=J,te=s("htQn");class se extends i.Component{constructor(...e){super(...e),o()(this,"_renderSearchItem",()=>{const{item:e}=this.props;return e.keyword?i.createElement(ee,{category:e.category,onRemove:this._handleOnRemove,query:e.keyword.query,ref:this._handleItemRef}):e.user?i.createElement(H,{id:e.user.id||"",onRef:this._handleItemRef,onRemove:this._handleOnRemove}):null}),o()(this,"_handleItemRef",e=>{this._itemRef=e}),o()(this,"_handleOnRemove",e=>{const{onRemoveQuery:t,item:s,index:r}=this.props;t(s,r),e.stopPropagation()}),o()(this,"_handleOnClick",()=>{const{onItemClick:e,index:t}=this.props;this.searchItemData&&e(this.searchItemData,t)})}render(){const{domId:e}=this.props;return i.createElement(c.a,{viewType:"search_item"},i.createElement(te.a,{accessibilityRole:"option",accessible:!0,"aria-selected":!!e,nativeID:e,onClick:this._handleOnClick,style:[re.root,e&&re.focused]},this._renderSearchItem()))}get searchItemData(){return this._itemRef&&this._itemRef.searchItemData}}const re=U.a.create(e=>({root:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:1,cursor:"pointer",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},focused:{backgroundColor:e.colors.faintGray}}));var ne=se,ae=s("MWbm"),oe=s("eb3s"),ie=s("MXDK");const ce=p.a.ee295fbe,le={headline:p.a.f45c425f,text:p.a.caae4dd9,confirmButtonLabel:p.a.dbd5d40f},de=p.a.a8d68f61,he=p.a.c6530778,ue=p.a.e047b8fa;class pe extends i.Component{constructor(e){super(e),o()(this,"_getRecentSearchItems",()=>{const{failedRecentSearchUserIds:e,recentSearches:t}=this.props,s=t.filter(({user:t})=>!t||e.indexOf(t.id)<0);return s.length>15?s.slice(0,15):s}),o()(this,"_render",()=>{const{domId:e,savedSearches:t}=this.props,s=0===this._getNumOfSearchItems(),r=this._getRecentSearchItems();return s?i.createElement(ae.a,{style:[me.emptyState]},i.createElement(z.c,{align:"center",color:"deepGray"},ce)):i.createElement(ae.a,{accessibilityRole:"listbox",nativeID:e},r.length>0?i.createElement(i.Fragment,null,i.createElement(ae.a,{importantForAccessibility:"no-hide-descendants",style:me.header},i.createElement(z.c,{numberOfLines:1,size:"large",weight:"bold"},de),i.createElement(N.a,{onPress:this._handleClearAllClick,size:"small",type:"text"},ue)),r.map((e,t)=>this._renderRecentSearchItem(e,t))):null,t.length>0?i.createElement(i.Fragment,null,i.createElement(ae.a,{importantForAccessibility:"no-hide-descendants",style:me.header},i.createElement(z.c,{numberOfLines:1,size:"large",weight:"bold"},he)),this._renderSavedSearches()):null)}),o()(this,"_renderRecentSearchItem",(e,t)=>{const{ariaDescendantId:s}=this.props,r=this.state.focusIndex===t,n=e.keyword?"keyword_"+e.keyword.query:e.user?"user_"+e.user.id:""+t;return i.createElement(ne,{domId:r?s:void 0,index:t,item:e,key:n,onItemClick:this._handleOnItemClick,onRemoveQuery:this._handleRemoveQuery,ref:r?this._setFocusedItemRef:void 0})}),o()(this,"_renderSavedSearches",()=>{const{ariaDescendantId:e,savedSearches:t}=this.props,{focusIndex:s}=this.state,r=this._getRecentSearchItems();return i.createElement(ae.a,null,t.map((t,n)=>{const a=s===n+r.length;return i.createElement(ne,{domId:a?e:void 0,index:n,item:t,key:t.savedSearchId,onItemClick:this._handleOnItemClick,onRemoveQuery:this._handleRemoveQuery,ref:a?this._setFocusedItemRef:void 0})}))}),o()(this,"_getNumOfSearchItems",()=>{const{savedSearches:e}=this.props,t=this._getRecentSearchItems();return e.length+t.length}),o()(this,"_handleUsersRetry",()=>{this._fetchUsersIfNeeded()}),o()(this,"_fetchUsersIfNeeded",()=>{const{fetchUsersIfNeeded:e,createLocalApiErrorHandler:t,recentSearches:s,invalidRecentSearchUserIds:r}=this.props;e(s.map(e=>e.user).filter(Boolean).map(e=>e.id).filter(e=>r.indexOf(e)<0)).catch(t({}))}),o()(this,"_handleRemoveQuery",(e,t)=>{const{analytics:s,removeQuery:r}=this.props;switch(e.category){case I.b.RecentSearch:{const n={keyword:e.keyword,user:e.user};r(n),this._resetFocus();const a=A.a.forRecentSearchResult(n,t),o=e.user?"clear_user":"clear_topic";a&&s.scribe({action:o,data:{items:[a]}});break}case I.b.SavedSearch:this.setState({shouldShowDeleteSavedSearchConfirmation:!0,savedSearchIdToDelete:e.savedSearchId});break;default:return}}),o()(this,"_handleClearAllClick",()=>{this.setState({shouldShowClearAllConfirmationSheet:!0})}),o()(this,"_handleOnClearAllConfirm",()=>{const{analytics:e,clearAll:t}=this.props;t(),e.scribeAction("clear_all"),this.setState({shouldShowClearAllConfirmationSheet:!1})}),o()(this,"_handleOnClearAllCancel",()=>{this.setState({shouldShowClearAllConfirmationSheet:!1})}),o()(this,"_handleOnDeleteSavedSearchConfirm",()=>{const{analytics:e,deleteSavedSearch:t,savedSearches:s}=this.props,{savedSearchIdToDelete:r}=this.state,n=s.find(e=>e.savedSearchId===r);if(r){t(r);const s=n&&A.a.forSavedSearchResult(n.keyword.query);s&&e.scribe({element:"saved_search",action:"delete",data:{items:[s]}})}this.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})}),o()(this,"_handleOnDeleteSavedSearchCancel",()=>{this.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})}),o()(this,"_handleOnItemClick",(e,t)=>{const{onDismiss:s,onItemClick:r}=this.props;r(e,t),this._scribeClick(e,t),s&&s()}),o()(this,"_scribeRecentSearchImpression",()=>{const{analytics:e,recentSearches:t}=this.props;if(t&&t.length){const s=Object(y.a)(t.map((e,t)=>A.a.forRecentSearchResult(e,t)));e.scribe({action:"impression",data:{items:s}})}}),o()(this,"_scribeSavedSearchImpression",()=>{const{analytics:e,savedSearches:t}=this.props;if(t&&t.length){const s=Object(y.a)(t.map((e,t)=>A.a.forSavedSearchResult(e.keyword.query)));e.scribe({element:"saved_search",action:"impression",data:{items:s}})}}),o()(this,"_scribeClick",(e,t)=>{const{analytics:s}=this.props;switch(e.category){case I.b.SavedSearch:{const t=A.a.forSavedSearchResult(e.query);s.scribe({element:"saved_search",action:"search",data:{targets:[t]}});break}case I.b.RecentSearch:{let r;e.recentSearchType&&(r=e.recentSearchType===I.a.User?{user:{type:I.a.User,id:e.query}}:{keyword:{type:I.a.Keyword,query:e.query}});const n=r&&A.a.forRecentSearchResult(r,t);n&&s.scribe({action:"click",data:{targets:[n]}});break}}}),o()(this,"_setFocusedItemRef",e=>{this._focusedItemRef=e,e&&this._shouldScrollToFocusedItem&&(Object(ie.c)(this._getScrollParent(),this._getFocusedItem()),this._shouldScrollToFocusedItem=!1)}),o()(this,"hasFocusedItem",()=>this._getNumOfSearchItems()>0),o()(this,"selectFocusedItem",()=>{if(this.hasFocusedItem()){const e=this._focusedItemRef&&this._focusedItemRef.searchItemData;e&&this._handleOnItemClick(e,this.state.focusIndex)}}),o()(this,"_setFocusIndex",(e,t)=>{const{onItemFocusChanged:s}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),s&&s()}),o()(this,"_resetFocus",()=>{this._setFocusIndex(-1)}),o()(this,"focusNext",()=>{const{focusIndex:e}=this.state,t=this._getNumOfSearchItems();if(0===t)return;const s=e+1>=t?0:e+1;this._setFocusIndex(s,!0)}),o()(this,"focusPrevious",()=>{const{focusIndex:e}=this.state,t=this._getNumOfSearchItems();if(0===t)return;const s=e-1<0?t-1:e-1;this._setFocusIndex(s,!0)}),this.state={focusIndex:0,shouldShowClearAllConfirmationSheet:!1,shouldShowDeleteSavedSearchConfirmation:!1}}componentDidMount(){const{createLocalApiErrorHandler:e,fetchRecentSearchesIfNeeded:t,fetchSavedSearchesIfNeeded:s,recentSearches:r,savedSearches:n,onRef:a}=this.props;a&&a(this),t(),this._fetchUsersIfNeeded(),s().catch(e({})),this._scribeRecentSearchImpression(),this._scribeSavedSearchImpression(),(r&&r.length||n&&n.length)&&this._resetFocus()}componentDidUpdate(e){const{recentSearches:t,savedSearches:s,onRef:r}=this.props;e.recentSearches!==t&&(this._fetchUsersIfNeeded(),this._resetFocus(),this._scribeRecentSearchImpression()),e.savedSearches!==s&&(this._resetFocus(),this._scribeSavedSearchImpression()),e.onRef&&e.onRef!==r&&e.onRef(void 0),r&&r!==e.onRef&&r(this)}componentWillUnmount(){this.props.onRef&&this.props.onRef(void 0)}render(){const{style:e,fetchStatus:t}=this.props,{shouldShowClearAllConfirmationSheet:s,shouldShowDeleteSavedSearchConfirmation:r}=this.state;return i.createElement(ae.a,{style:e},i.createElement(D.a,{fetchStatus:t,onRequestRetry:this._handleUsersRetry,render:this._render}),s?i.createElement(oe.a,{confirmButtonLabel:le.confirmButtonLabel,confirmButtonType:"destructive",headline:le.headline,onCancel:this._handleOnClearAllCancel,onConfirm:this._handleOnClearAllConfirm,text:le.text}):null,r?i.createElement(O.a,{onCancel:this._handleOnDeleteSavedSearchCancel,onConfirm:this._handleOnDeleteSavedSearchConfirm}):null)}_getScrollParent(){if(!this._scrollParent){const e=Object(ie.a)(k.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}_getFocusedItem(){const e=this._focusedItemRef&&k.a.findDOMNode(this._focusedItemRef);return e instanceof Element?e:null}}const me=U.a.create(e=>({emptyState:{padding:e.spaces.xSmall,paddingTop:e.spaces.medium},header:{alignItems:"center",borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:1,flexDirection:"row",justifyContent:"space-between",paddingVertical:e.componentDimensions.gutterVertical,paddingHorizontal:e.componentDimensions.gutterHorizontal}}));var fe=C(pe),_e="SearchBox_Search_Input",ye=s("4e/K"),be=s("TnY3"),Se=s("GZwR");const ge=p.a.ib2e46ee,Ie=p.a.hbc99b02,ve=/^(\w+)$/,Ee=[Se.a.Events,Se.a.Users,Se.a.Topics],xe=e=>"@"===e[0]?e.substring(1):e;class we extends i.Component{constructor(e,t){super(e,t),o()(this,"_renderSearchBoxEmptyState",e=>i.createElement(fe,n()({},e,{onItemClick:this._handleSearchItemClick}))),o()(this,"_handleSearchItemClick",({link:e,query:t,recentSearchType:s,category:r})=>{const{addQuery:n}=this.props;r===I.b.SavedSearch?this._submitQuery({query:t,shouldAddToRecentSearch:!1,src:f.a.SavedSearchClick}):s===I.a.Keyword?this._submitQuery({query:t,shouldAddToRecentSearch:!0,src:f.a.RecentSearchClick}):e&&(this._routeTransition({pathname:"/"+e}),n({user:{id:t,type:I.a.User}}))}),o()(this,"_handleSearchShortcut",e=>{const t=this._inputRef;t&&(e&&t.setQuery(e),t.focus())}),o()(this,"_getUserExactMatch",({query:e,hasResults:t,isLoaded:s})=>{const r=xe(e);if(r.match(ve))return{id:e+"_no_result_user",type:Se.b.NoResult,data:{text:Ie({screenName:r}),type:"user"}}}),o()(this,"_handleOnDismiss",()=>{const{history:e}=this.props,{location:t}=e,s=t.state||{};if(s.searchFocused){const r=Object.assign({},t,{state:Object.assign({},s,{lockScroll:!1,searchFocused:!1})});e.replace(r)}}),o()(this,"_handleOnFocus",()=>{const{analytics:e,history:t}=this.props,{location:s}=t,r=s.state||{};if(!r.searchFocused){const n=Object.assign({},s,{state:Object.assign({},r,{searchFocused:!0,lockScroll:!0})});e.scribe({action:"focus_field"}),t.push(n)}}),o()(this,"_handleChange",e=>{this.setState({query:e,querySubmitted:!1})}),o()(this,"_handleTypeaheadSubmit",e=>{const{query:t}=this.state;/^\s*$/.test(t)||this._submitQuery({query:t,shouldAddToRecentSearch:!0})}),o()(this,"_handleItemClick",(e,t)=>{const{addQuery:s}=this.props,{query:r}=this.state;switch(e.type){case Se.b.User:if(e.data.id_str){s({user:{id:e.data.id_str,type:I.a.User}})}this._routeTransition({pathname:"/"+e.data.screen_name});break;case Se.b.Topic:case Se.b.Hashtag:this._submitQuery({query:e.data.topic,shouldAddToRecentSearch:!0,src:f.a.TypeaheadClick});break;case Se.b.Event:e.data&&e.data.url?this._routeTransition({pathname:m.b.parseInternalUrl(e.data.url)}):this._submitQuery({query:e.data.topic,src:f.a.TypeaheadClick});break;case Se.b.NoResult:{const{type:t}=e.data;"user"===t?this._routeTransition({pathname:"/"+xe(r)}):"topic"===t&&this._submitQuery({query:r,shouldAddToRecentSearch:!0,src:f.a.TypeaheadClick});break}}}),o()(this,"_routeTransition",({pathname:e,query:t,params:s,src:r})=>{const{history:n,location:a}=this.props,o=Object.assign({},a,{pathname:e,search:"",query:s||(t?{q:t,src:r}:{}),state:Object.assign({},a.state,{searchFocused:!1,lockScroll:!1})});n.replace(o)}),o()(this,"_submitQuery",({query:e,shouldAddToRecentSearch:t=!1,src:s=f.a.Typed})=>{const{addQuery:r,mode:n,onSubmit:a,searchFilters:o,searchRoute:i}=this.props;if(a&&a(e,s),t){r({keyword:{query:e,type:I.a.Keyword}})}const c=Object(I.g)({query:e,querySrc:s,mode:n,searchFilters:o});this._routeTransition({pathname:i,params:c,src:s}),this.setState({querySubmitted:!0})}),o()(this,"_setInputRef",e=>{this._inputRef=e}),this.state={query:e.initialValue,querySubmitted:!0}}UNSAFE_componentWillMount(){const{location:e,shouldHandleSearchShortcut:t}=this.props,{searchFocused:s}=e.state||{};this._autoFocus=!!s,t&&(this._unregisterSearchShortcutHandler=Object(_.b)(this._handleSearchShortcut))}componentWillUnmount(){this._unregisterSearchShortcutHandler&&this._unregisterSearchShortcutHandler()}UNSAFE_componentWillReceiveProps(e){this.props.initialValue!==e.initialValue&&this.setState({query:e.initialValue,querySubmitted:!0})}render(){const{location:e,placeholder:t}=this.props,{query:s}=this.state,{searchPrefill:r}=e.state||{},n=this.props.initialValue||r;return i.createElement(c.a,{viewType:"search_field"},i.createElement(ae.a,{style:Re.root},i.createElement(ye.default,{filter:Ee,getTopicExactMatch:s?Se.e:void 0,getUserExactMatch:s?this._getUserExactMatch:void 0,initialValue:n,inputStyle:Re.input,onDismiss:this._handleOnDismiss,onFocus:this._handleOnFocus,onItemClick:this._handleItemClick,onQueryChange:this._handleChange,onSubmit:this._handleTypeaheadSubmit,placeholder:t,ref:this._setInputRef,renderEmptyState:this._renderSearchBoxEmptyState,rounded:!0,shouldAutoFocus:this._autoFocus,shouldClearOnSelect:!0,shouldDeferPrefetch:!0,source:Se.d.SearchBox,testID:_e,withFixedPositioning:!0,withFocusStyling:!0})))}}o()(we,"defaultProps",{initialValue:"",placeholder:ge,searchRoute:"/search"});const Re=U.a.create(e=>({root:{alignItems:"stretch",flexBasis:0,flexDirection:"row",flexGrow:1},input:{flexShrink:1}}));t.default=Object(be.a)(h(we))},AQOc:function(e,t,s){"use strict";s.d(t,"b",(function(){return h})),s.d(t,"a",(function(){return u}));s("IAdD"),s("kYxP");var r=s("LdEA"),n=s.n(r),a=s("lnti"),o=s("aWyx");const i={entries:{},entryIdsByConversationId:{},reactionsByMessageId:{}},c=(e=[],t={})=>e.map(e=>{if(e.proof_type===o.d.MUTUAL_FRIENDS){const{users:s}=e,r=n()(e,["users"]);return Object.assign({},r,{users:Object(a.a)(s.map(e=>t[e]))})}return e}),l=(e=[],t={})=>e.reduce((e,s)=>{const r=s.user_id,n=t[r]||{id_str:r};return e[r]=Object.assign({},s,{user:n}),e},{}),d=(e,{entries:t,entryIdsByConversationId:s})=>(s[e]||[]).map(e=>t[e]&&t[e].data).filter(Boolean),h=(e,t=i,s)=>{const{conversation_id:r,participants:a}=e,o=n()(e,["conversation_id","participants"]);return Object.assign({conversation_id:r},o,{entries:t.entryIdsByConversationId[r]||[],participants:l(a,s)})},u=(e,t,s)=>{const{conversation_id:r,participants:a,social_proof:o}=e,i=n()(e,["conversation_id","participants","social_proof"]);return Object.assign({conversation_id:r},i,{entries:d(r,t),participants:l(a,s)},o?{social_proof:c(o,s)}:{})}},OEYw:function(e,t,s){"use strict";var r=s("97Jx"),n=s.n(r),a=s("LdEA"),o=s.n(a),i=s("KEM+"),c=s.n(i),l=s("ERkP"),d=(s("kYxP"),s("rxPX")),h=s("0KEI"),u=s("hqKg"),p=s("oEoC"),m=s("o52z"),f=s("kGix"),_=s("Qyxo"),y=s("lnti"),b=(s("IAdD"),s("JtPf"),s("MvUL"),s("tVqn"),s("vy4g")),S=s("3A2y"),g=s("Ssj5"),I=s("oEOe"),v=s("GZwR");const E=[],x=Object(I.a)("rweb/typeaheadV2","FETCH"),w=({q:e,result_type:t,src:s})=>`${e}_${t}_${s}`,R={remoteResults:{},cachedIds:[]};const C=e=>e.map(e=>{let{tokens:t,rounded_score:s}=e,r=o()(e,["tokens","rounded_score"]);const{topic:n,topic_type:a}=r,i=a||v.b.Topic;return{id:`${i}_${n.replace(" ","_")}`,type:i,tokens:t,rounded_score:s,data:r}}),O=e=>e.map(e=>{let{tokens:t,rounded_score:s}=e,r=o()(e,["tokens","rounded_score"]);const n=r.topic_type||v.b.Event;return{id:`${n}_${r.topic.replace(" ","_")}`,type:n,tokens:t,rounded_score:s,data:r}}),D=e=>e.map(e=>{let{tokens:t,rounded_score:s}=e,r=o()(e,["tokens","rounded_score"]);const n=r.topic_type||v.b.List;return{id:`${n}_${r.topic.replace(" ","_")}`,listId:r.object_id,type:n,tokens:t,rounded_score:s,data:r}}),T=(e,t)=>e.typeaheadV2.remoteResults[t],k=e=>(t,s)=>{const r=T(s(),w(e));return r&&r.timestamp&&Date.now()-r.timestamp<=3e5?Promise.resolve():t(A(e))},A=e=>(t,s,{api:r})=>{if(!e||!e.q||""===e.q.trim())return Promise.resolve();const n={queryId:w(e)};return Object(I.b)(t,{params:e,request:r.Typeahead.fetch})({actionTypes:x,context:"FETCH_TYPEAHEAD",meta:n})};g.a.register({typeaheadV2:function(e=R,t){switch(t.type){case x.REQUEST:{const{meta:{queryId:s}}=t;return Object.assign({},e,{remoteResults:Object.assign({},e.remoteResults,{[s]:Object.assign({},e.remoteResults[s],{fetchStatus:f.a.LOADING})})})}case x.SUCCESS:{const{meta:{queryId:s},payload:r}=t,n=e.cachedIds.filter(e=>e!==s),a=n.length>=25?Object(S.a)(e.remoteResults,n.splice(0,1)):e.remoteResults,o=r.users.map(e=>Object(b.a)(e,v.c.Remote));return Object.assign({},e,{cachedIds:[...n,s],remoteResults:Object.assign({},a,{[s]:{fetchStatus:f.a.LOADED,id:s,orderedSections:r.ordered_sections,events:O(r.events),topics:C(r.topics),lists:D(r.lists),users:Object(v.f)(o),timestamp:Date.now()}})})}case x.FAILURE:{const{meta:{queryId:s}}=t;return Object.assign({},e,{remoteResults:Object.assign({},e.remoteResults,{[s]:Object.assign({},e.remoteResults[s],{fetchStatus:f.a.FAILED})})})}default:return e}}});var F=s("UQTn");const j=[v.a.Users],P=e=>{const{filter:t,query:s,source:r}=e;return w({q:s,result_type:(t||j).join(","),src:r})},N=(e,t)=>((e,t)=>{const s=T(e,t);return s&&s.fetchStatus})(e,P(t)),L=(e,t)=>((e,t)=>{const s=T(e,t);return s&&s.users||E})(e,P(t)),U=(e,t)=>((e,t)=>{const s=T(e,t);return s&&s.topics||E})(e,P(t)),M=(e,t)=>((e,t)=>{const s=T(e,t);return s&&s.events||E})(e,P(t)),B=(e,t)=>((e,t)=>{const s=T(e,t);return s&&s.lists||E})(e,P(t)),q=(e,t)=>(t.rounded_graph_weight||0)-(e.rounded_graph_weight||0),H=()=>Object(u.createSelector)(L,Object(u.createSelector)((e,t)=>t.query,(e,t)=>t.filter,F.d,F.e,(e,t,s,r)=>{if(!e||!t||t.indexOf(v.a.Users)<0)return Object(m.a)();const n=Object(F.f)(s,e);return Object(v.f)(n.map(e=>r[e]).sort(q).slice(0,10))}),N,(e,t)=>t.injectedItems,(e,t)=>t.query,(e,t)=>t.getUserExactMatch,(e,t,s,r,n,a)=>{const o=Object(_.a)(r||[],e=>e.type===v.b.User?e.data.id_str:void 0),i=t.filter(e=>o.indexOf(e.id)<0),c=e.filter(e=>o.indexOf(e.id)<0),l=Object(p.a)(i,c).slice(0,10),d=s===f.a.LOADED,h=a&&a({query:n,hasResults:!!e.length,isLoaded:d}),u=h?[...l,h]:l;return u.length?u:Object(m.a)()}),W=()=>Object(u.createSelector)(H(),Object(u.createSelector)(U,N,(e,t)=>t.query,(e,t)=>t.maxTopics,(e,t)=>t.getTopicExactMatch,(e,t,s,r,n)=>{const a=t===f.a.LOADED,o=n&&n({query:s,hasResults:!!e.length,isLoaded:a}),i=e.slice(0,r||3);return o&&i.push(o),i.length?i:Object(m.a)()}),Object(u.createSelector)(M,N,(e,t)=>t.query,(e,t)=>t.maxEvents,(e,t)=>t.filter,(e,t,s,r,n)=>{const a=s&&n&&n.indexOf(v.a.Events)>=0,o=e.slice(0,r||1);return o.length&&a?o:Object(m.a)()}),Object(u.createSelector)(B,N,(e,t)=>t.query,(e,t)=>t.filter,(e,t,s,r)=>{const n=s&&r&&r.indexOf(v.a.Lists)>=0;return e.length&&n?e:Object(m.a)()}),(e,t)=>t.injectedItems,(e,t,s,r,n)=>{const a=n&&n.length?n:null;return t.length||e.length||s.length||r.length?Object(y.a)([a,s.length?s:void 0,t.length?t:void 0,e.length?e:void 0,r.length?r:void 0]):a?[a]:Object(m.a)()});var K=Object(d.a)().propsFromState(()=>({fetchStatus:N,items:W()})).propsFromActions(()=>({createLocalApiErrorHandler:Object(h.d)("TYPEAHEAD_DROPDOWN_CONTAINER_CONTEXT"),fetchTypeaheadIfNeeded:k,prefetchTypeaheadUsersIfNeeded:F.b})).withAnalytics({element:"typeahead"}),G=s("kIAd"),V=s("Rp9C"),z=(s("AxOO"),s("w6IS")),Q=s("7nmT"),Y=s.n(Q),X=s("ZcYN"),$=s("MWbm"),J=s("I7xG"),Z=s("JYMr"),ee=s("0yYu"),te=s("rHpw"),se=s("MXDK");class re extends l.Component{constructor(e,t){super(e),c()(this,"_setFocusedItemRef",e=>{const t=Y.a.findDOMNode(e);this._shouldScrollToFocusedItem&&t instanceof window.Element&&(Object(se.c)(this._getScrollParent(),t),this._shouldScrollToFocusedItem=!1)}),c()(this,"_resetScroll",()=>{const e=this._getScrollParent();e&&(e.scrollTop=0)}),c()(this,"_handleItemClick",(e,t)=>{const{onItemClick:s}=this.props,r=this._getFlattenedItems().indexOf(e);e&&!t&&!this._shouldBlockInteractivity&&s(e,r),this._resetFocus()}),c()(this,"_getResultCount",()=>this._getFlattenedItems().length),c()(this,"_getFlattenedItems",Object(J.a)(this,e=>e.items,e=>Object(z.a)(e))),c()(this,"_setFocusIndex",(e,t)=>{const{onItemFocusChanged:s}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),s&&s(this._getFlattenedItems()[e])}),c()(this,"_resetFocus",()=>{this._setFocusIndex(this.props.withItemAlwaysSelected?0:-1)}),c()(this,"focusNext",()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const s=e+1>=t?0:e+1;this._setFocusIndex(s,!0)}),c()(this,"focusPrevious",()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const s=e-1<0?t-1:e-1;this._setFocusIndex(s,!0)}),c()(this,"hasFocusedItem",()=>{const{focusIndex:e}=this.state,t=this._getFlattenedItems();return e>=0&&t.length>e}),c()(this,"selectFocusedItem",()=>{const{focusIndex:e}=this.state,{getItemIsDisabled:t}=this.props;if(this.hasFocusedItem()){const s=this._getFlattenedItems()[e],r=!!t&&t(s,s.data);this._handleItemClick(s,r)}}),this.state={focusIndex:e.withItemAlwaysSelected?0:-1,showProgressBar:!1}}componentDidMount(){this._resetFocus()}componentWillUnmount(){clearTimeout(this._interactivityTimeout),clearTimeout(this._delayedProgressTimeout)}UNSAFE_componentWillReceiveProps(e){e.items!==this.props.items&&(this._resetFocus(),this._resetScroll()),!this.props.isLoading&&e.isLoading&&(this._delayedProgressTimeout=setTimeout(()=>this.setState({showProgressBar:!0}),G.a)),this.props.isLoading&&!e.isLoading&&(clearTimeout(this._delayedProgressTimeout),this.setState({showProgressBar:!1}))}componentDidUpdate(e){e.items!==this.props.items&&(this._interactivityTimeout&&clearTimeout(this._interactivityTimeout),this._shouldBlockInteractivity=!0,this._interactivityTimeout=setTimeout(()=>{this._shouldBlockInteractivity=!1},500))}render(){const{domId:e,isLoading:t,items:s,selectedItems:r,style:n,renderNoResultsState:a}=this.props,{showProgressBar:o}=this.state,i=t||s.length;let c=0;const d=!!r;return i?l.createElement($.a,{accessibilityRole:"listbox","aria-multiselectable":d,nativeID:e,style:n},l.createElement(Z.a,{ariaValueText:o?"Loading results":"",indeterminate:o,style:!o&&ne.hidden}),s.length?s.map((e,t)=>{const r=!Array.isArray(s[t-1])&&t>0,n=t<s.length-1,a=Array.isArray(e)?this._renderTypeaheadGroup(e,c,r,n):this._renderTypeaheadItem(e,c);return c+=Array.isArray(e)?e.length:1,a}):null):a?l.createElement($.a,{style:n},a()):null}_renderTypeaheadGroup(e,t,s,r){const{withSectionDivider:n}=this.props;return l.createElement(l.Fragment,{key:"typeaheadGroup-"+t},n&&s?l.createElement(ee.a,{key:"typeaheadDividerTop-"+t}):null,e.map((e,s)=>this._renderTypeaheadItem(e,t+s)),n&&r?l.createElement(ee.a,{key:"typeaheadDividerBottom-"+t}):null)}_renderTypeaheadItem(e,t){const{ariaDescendantId:s,getItemDisabledMessage:r,getItemIsDisabled:n,renderUserDecoration:a,selectedItems:o}=this.props,{focusIndex:i}=this.state,c=!(!o||!e.id)&&o.indexOf(e.id)>=0,d=!!o,h=i===t,u=n&&n(e,e.data),p=r&&r(e,e.data);return l.createElement(X.b,{disabledMessage:p,domId:h?s:void 0,isDisabled:u,isFocused:h,isInMultiSelect:d,isSelected:c,item:e,key:`typeaheadItem-${t}-${e.id||""}`,onClick:this._handleItemClick,onRef:h?this._setFocusedItemRef:void 0,renderUserDecoration:a})}_getScrollParent(){if(!this._scrollParent){const e=Object(se.a)(Y.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}}const ne=te.a.create(e=>({hidden:{visibility:"hidden"}}));s("aWzz");var ae=s("VY6S");class oe extends l.Component{constructor(e,t){super(e,t),c()(this,"_fetchTypeaheadResultsIfNeeded",e=>{e.query&&e.fetchTypeaheadIfNeeded({q:e.query,src:e.source,result_type:e.filter.join(","),context_text:e.contextText,topic_type:e.topicType}).catch(e.createLocalApiErrorHandler({}))}),c()(this,"_setComponentRef",e=>{this._componentRef=e}),c()(this,"focusNext",()=>{this._componentRef&&this._componentRef.focusNext()}),c()(this,"focusPrevious",()=>{this._componentRef&&this._componentRef.focusPrevious()}),c()(this,"selectFocusedItem",()=>{this._componentRef&&this._componentRef.selectFocusedItem()}),c()(this,"hasFocusedItem",()=>this._componentRef&&this._componentRef.hasFocusedItem()),c()(this,"_handleItemClick",(e,t)=>{const{analytics:s,onItemClick:r,query:n}=this.props;r(e,t),s.scribe({action:"click",data:{search_details:{query:n},targets:[V.a.forTypeaheadResult(e,t)]}})}),c()(this,"_scribeResults",()=>{const{analytics:e,items:t,query:s}=this.props,r=Object(y.a)(Object(z.a)(t).map((e,t)=>V.a.forTypeaheadResult(e,t)));e.scribe({action:"impression",data:{items:r,search_details:{query:s}}})}),this._debouncedFetchTypeaheadResultsIfNeeded=Object(ae.a)(this._fetchTypeaheadResultsIfNeeded,250),this.state={shouldShowPrefetchResults:!0}}componentDidMount(){const{createLocalApiErrorHandler:e,onRef:t,prefetchTypeaheadUsersIfNeeded:s}=this.props;t&&t(this),this._debouncedFetchTypeaheadResultsIfNeeded(this.props),s().catch(e({}))}componentWillUnmount(){this.props.onRef&&this.props.onRef(void 0),clearTimeout(this._prefetchResultsTimer)}UNSAFE_componentWillReceiveProps(e){const{onRef:t,query:s,filter:r,source:n}=this.props,{query:a,filter:o,source:i}=e;t&&t!==e.onRef&&t(void 0),a===s&&o===r&&i===n||(this._debouncedFetchTypeaheadResultsIfNeeded(e),e.shouldDeferPrefetch&&(clearTimeout(this._prefetchResultsTimer),this.setState({shouldShowPrefetchResults:!1}),this._prefetchResultsTimer=setTimeout(()=>{this.props.query&&this.props.fetchStatus!==f.a.LOADED&&this.setState({shouldShowPrefetchResults:!0})},G.a)))}componentDidUpdate(e){const{onRef:t,items:s}=this.props;t&&t!==e.onRef&&t(this),(null==s?void 0:s.length)&&s!==e.items&&this._scribeResults()}render(){const e=this.props,{injectedItems:t,items:s,query:r,fetchStatus:a}=e,i=o()(e,["analytics","contextText","filter","getTopicExactMatch","getUserExactMatch","injectedItems","items","onRef","onItemClick","query","shouldDeferPrefetch","source","topicType","fetchStatus","createLocalApiErrorHandler","fetchTypeaheadIfNeeded","maxEvents","maxTopics","prefetchTypeaheadUsersIfNeeded"]),c=r&&a!==f.a.LOADED,d=c&&!this.state.shouldShowPrefetchResults?t:s;return l.createElement(re,n()({},i,{isLoading:!!c,items:d,onItemClick:this._handleItemClick,ref:this._setComponentRef}))}}c()(oe,"defaultProps",{filter:[v.a.Users],injectedItems:[],maxEvents:3,maxTopics:1});const ie=K(oe);t.a=ie},OhSZ:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));s("kYxP");var r=s("ERkP"),n=s("aWyx"),a=s("XnpN"),o=s("jV+4"),i=s("t62R"),c=s("p9G8");const l=(e=[])=>e.map(({data:e})=>e),d=({conversation:e,newConversationParticipants:t,perspective:s})=>{if(e){if(e.type===n.a.ONE_TO_ONE){const[t]=Object(a.a)(e,s).map(({user:e})=>e);return t.name}return Object(c.a)(e,s)}{const e=l(t);return Object(c.b)(e,s)}};t.b=({conversation:e,newConversationParticipants:t,perspective:s,titleWeight:d="bold",textColor:h="normal",withScreenName:u=!0})=>{if(e){if(e.type===n.a.ONE_TO_ONE){const[t]=Object(a.a)(e,s).map(({user:e})=>e);return r.createElement(o.a,{color:h,isProtected:t.protected,isVerified:t.verified,name:t.name,screenName:t.screen_name,weight:d,withLink:!1,withScreenName:u})}return r.createElement(i.c,{color:h,numberOfLines:1,weight:d},Object(c.a)(e,s))}{const e=l(t);return r.createElement(i.c,{color:h,numberOfLines:1,weight:d},Object(c.b)(e,s))}}},V2l4:function(e,t,s){"use strict";s.r(t),s.d(t,"UserPicker",(function(){return b}));var r=s("KEM+"),n=s.n(r),a=s("ERkP"),o=s("ZcYN"),i=s("3XMw"),c=s.n(i),l="searchPeople",d=s("4e/K"),h=s("MWbm"),u=s("aV/s"),p=s("rHpw"),m=s("GZwR");const f=[m.a.Users],_=c.a.fc9dd578,y=c.a.gdb7bc24;class b extends a.Component{constructor(e,t){super(e,t),n()(this,"_renderSelectedUsersList",()=>{const{selectedUsers:e}=this.props;return a.createElement(h.a,{style:S.selectedUsersList},e.map(this._renderSelectedUserPill))}),n()(this,"_renderSelectedUserPill",e=>{const{withCompactPills:t}=this.props,s=this.props.onRemove.bind(this,e);let r;return e.type===m.b.User&&(r=e.data.profile_image_url_https),a.createElement(u.a,{accessibilityLabel:y({name:e.data.name}),compact:t,key:e.id,mode:"remove",onClick:s,style:S.selectionPill,text:e.data.name,userAvatarURI:r})}),n()(this,"_getItemIsDisabled",e=>{const{getItemIsDisabled:t,preselectedUsers:s}=this.props;return s.indexOf(e.id)>=0||!(!t||!t(e))}),n()(this,"_getItemDisabledMessage",e=>{const{getItemDisabledMessage:t,preselectedUsers:s}=this.props;return s.indexOf(e.id)>=0?null:t&&t(e)}),n()(this,"_handleQueryChange",e=>{const{onQueryChange:t}=this.props;this.setState({query:e}),t&&t(e)}),n()(this,"_handleOnSelect",e=>{const{onSelect:t}=this.props;t&&t(e)}),this.state={query:""}}render(){const{injections:e,selectedUsers:t,shouldAutoFocus:s,preselectedUsers:r,source:n}=this.props,i=t.map(({id:e})=>e).concat(r);return a.createElement(h.a,{style:S.root},a.createElement(d.default,{alwaysOpen:!0,disableClearButton:!0,filter:f,getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injectedItems:e,isModal:!0,onItemClick:this._handleOnSelect,onQueryChange:this._handleQueryChange,placeholder:_,renderInSearchField:t.length?this._renderSelectedUsersList:null,renderUserDecoration:o.a,selectedItems:i,shouldAutoFocus:s,shouldClearOnSelect:!0,shouldFocusOnClear:!0,source:n,testID:l,withSectionDivider:!1}))}}n()(b,"defaultProps",{preselectedUsers:[],shouldAutoFocus:!0,withCompactPills:!1});const S=p.a.create(e=>({root:{flex:1},selectionPill:{margin:e.spaces.xxSmall,maxWidth:`calc(100% - ${e.spaces.small})`},selectedUsersList:{flexDirection:"row",flexWrap:"wrap",padding:e.spaces.xxSmall}}));t.default=b},XnpN:function(e,t,s){"use strict";s("kYxP");var r=s("aWyx"),n=s("t0aI");const a=(e=0)=>new Date(Number(e)),o=(e,t)=>a(e.join_time)-a(t.join_time),i=({user:e},{user:t})=>Object(n.a)(e.id_str,t.id_str);var c=s("tn7R"),l=s("VIKJ");t.a=(e,t)=>{const{participants:s,type:n,created_by_user_id:a}=e,d=Object(c.a)(s),[h,u]=Object(l.a)(d,({user:e})=>e.id_str===t);return u.length?n===r.a.GROUP&&1===u.length?[...h,...u]:a?u.sort(((...e)=>(t,s)=>e.map(e=>e(t,s)).filter(e=>!!e)[0]||0)((e=>({user:t},{user:s})=>{switch(e){case t.id_str:return-1;case s.id_str:return 1;default:return 0}})(a),o,i)):u:h}},ZcYN:function(e,t,s){"use strict";s.d(t,"a",(function(){return te}));s("kYxP");var r=s("KEM+"),n=s.n(r),a=s("ERkP"),o=s("E2gn"),i=s("IMYl"),c=s("k/38"),l=s("v6aA"),d=s("rxPX"),h=s("AQOc"),u=s("V5Qi"),p=s("G6rE");const m=(e,t)=>t.conversationId,f=(e,t)=>Object(u.a)(e,m(0,t));var _=Object(d.a)().propsFromState(()=>({conversationId:m,conversation:f,users:p.e.selectAll})).adjustStateProps(({conversationId:e,conversation:t,users:s})=>({conversation:t&&Object(h.b)(t.data,void 0,s)})),y=s("aA19"),b=s("OhSZ"),S=s("5mJL"),g=s("rHpw");const I=g.a.create(e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,width:"100%"},avatarColumn:{flexGrow:1,maxWidth:e.spaces.xLarge,minWidth:"32px"},bodyColumn:{flexGrow:7,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},disabled:{opacity:.6,backgroundColor:e.colors.faintGray}}));var v=_(({conversation:e,perspective:t,isDisabled:s,isSelected:r})=>e?a.createElement(S.a,{avatarCell:a.createElement(y.a,{conversation:e,perspective:t,size:"xLarge"}),avatarCellStyle:I.avatarColumn,avatarSize:"xLarge",cellStyle:I.bodyColumn,style:[I.root,!r&&s&&I.disabled]},a.createElement(b.b,{conversation:e,perspective:t}),te({isSelected:r})):null),E=s("MWbm"),x=s("97Jx"),w=s.n(x),R=s("LdEA"),C=s.n(R);class O extends a.Component{render(){const e=this.props,{children:t,style:s,withGutter:r}=e,n=C()(e,["children","style","withGutter"]),o=a.Children.map(t,e=>e&&a.cloneElement(e,{style:[e.props.style,D.column,r&&D.withGutterColumn]}));return a.createElement(E.a,w()({style:[s,D.root,r&&D.withGutter]},n),o)}}n()(O,"defaultProps",{withGutter:!1});const D=g.a.create(e=>({root:{flexDirection:"row"},column:{flexBasis:0,minWidth:0},withGutter:{marginHorizontal:"-"+e.spaces.xxSmall},withGutterColumn:{marginHorizontal:e.spaces.xxSmall}}));var T=O,k=s("t62R"),A=s("9Xij"),F=s("TIdA"),j=s("A91F");class P extends a.PureComponent{render(){const{image:e,event:t,supportText:s}=this.props;return a.createElement(E.a,{style:N.root},a.createElement(T,{withGutter:!0},a.createElement(E.a,{style:N.bodyColumn},s?a.createElement(k.c,{color:"deepGray",size:"small"},s):null,a.createElement(k.c,{numberOfLines:1},t)),e?a.createElement(E.a,{style:N.coverContainer},a.createElement(A.a,{ratio:1},a.createElement(F.a,{accessibilityLabel:"",aspectMode:j.a.SQUARE,image:e}))):null))}}const N=g.a.create(e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small},bodyColumn:{flexGrow:7,justifyContent:"center"},coverContainer:{backgroundColor:e.colors.lightGray,borderRadius:e.borderRadii.medium,flexGrow:1,justifyContent:"flex-end",maxHeight:"100px",maxWidth:"100px",overflow:"hidden",width:"25%"}}));var L=P,U=s("GZwR"),M=s("EHV7");class B extends a.PureComponent{render(){const{isDisabled:e,resultContext:t,topic:s}=this.props;return a.createElement(E.a,{style:[q.root,e&&q.disabled]},a.createElement(k.c,{weight:"bold",withHashflags:!0},s),t?a.createElement(E.a,{style:q.context},this._renderIcon(),a.createElement(k.c,{color:"deepGray"},t.display_string)):null)}_renderIcon(){const{resultContext:e}=this.props;return e&&e.types[0]&&"followable_topic"===e.types[0].type?a.createElement(M.a,{style:q.icon}):null}}const q=g.a.create(e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small},context:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.primary,height:e.fontSizes.small,paddingRight:e.spaces.xxSmall,width:e.fontSizes.small},disabled:{backgroundColor:e.colors.faintGray}}));var H=B,W=s("3XMw"),K=s.n(W),G=s("tocL"),V="TypeaheadUser",z=s("IMA+");const Q=K.a.ae2205d1,Y=K.a.d960b55b;class X extends a.PureComponent{render(){const{avatarUri:e,disabledMessage:t,isDisabled:s,isProtected:r,isVerified:n,name:o,screenName:i,decoration:c,userId:l}=this.props,d=this._getSocialContext(),h=this._getResultContext(),u=d||h;return a.createElement(z.a,{avatarSize:"xLarge",avatarUri:e,decoration:c,disabledMessage:s?t:void 0,displayMode:"UserCompact",isProtected:r,isVerified:n,name:o,screenName:i,socialContext:u,testID:V,userId:l,withLink:!1})}_getSocialContext(){const{socialContext:e}=this.props;if(!e||!e.following)return;const t=e.followed_by?Q:Y;return{contextType:G.a.Follow,text:t}}_getResultContext(){const{resultContext:e}=this.props;if(!e||!e.display_string||!e.types)return;return{contextType:"num_tweets"===e.types[0].type?G.a.NewTweets:G.a.Follow,text:e.display_string}}}var $=X,J=s("htQn");class Z extends a.Component{constructor(...e){super(...e),n()(this,"_onViewRef",e=>{this._viewRef=e;const{onRef:t}=this.props;t&&t(e)}),n()(this,"_handleClick",()=>{const{item:e}=this.props;this.props.onClick&&this.props.onClick(e,this.isDisabled)})}componentDidMount(){this._loaded=!0,this._viewRef&&(this._rafId=window.requestAnimationFrame(()=>{this._viewRef&&this._viewRef.setNativeProps({style:{opacity:1}})}))}componentWillUnmount(){this._rafId&&window.cancelAnimationFrame(this._rafId)}render(){const{domId:e,isDisabled:t,isFocused:s,isInMultiSelect:r,isSelected:n,style:i}=this.props;return a.createElement(o.a,{viewType:"typeahead_result"},a.createElement(E.a,{accessibilityRole:"option","aria-checked":!(!r||!n)||void 0,"aria-selected":t?void 0:r&&n||!r&&!!s,nativeID:e},a.createElement(J.a,{accessibilityRole:r?"checkbox":"button",accessible:!0,disabled:t,onPress:this._handleClick,style:[ee.root,s&&ee.focused,ee.transitionStyles,this._loaded&&ee.loaded,i],viewRef:this._onViewRef},this._renderResult())))}_renderResult(){const{item:e,disabledMessage:t,isDisabled:s,isSelected:r,renderUserDecoration:n}=this.props;switch(e.type){case U.b.User:{const{data:o}=e,i=n?n({userId:o.id_str,isSelected:r}):void 0;return a.createElement($,{avatarUri:o.profile_image_url_https,canDm:!!o.can_dm,canMediaTag:!!o.can_media_tag,decoration:i||void 0,disabledMessage:t,isDisabled:s,isProtected:!!o.protected,isVerified:!!o.verified,name:o.name,resultContext:o.result_context,screenName:o.screen_name,socialContext:o.social_context,userId:o.id_str})}case U.b.Event:{const{data:t}=e;return a.createElement(L,{event:t.topic,image:t.primary_image&&t.primary_image.original_info,supportText:t.supporting_text})}case U.b.Hashtag:case U.b.Topic:{const{data:t}=e;return a.createElement(H,{isDisabled:s,resultContext:t.result_context,topic:t.topic})}case U.b.DMConversation:return!!this.context.loggedInUserId&&a.createElement(v,{conversationId:e.id,isDisabled:s,isSelected:r,perspective:this.context.loggedInUserId});case U.b.NoResult:{const{data:t}=e,{text:s}=t;return a.createElement(k.c,{style:ee.noResult},s)}case U.b.List:{const{data:t,listId:s}=e,{topic:r,supporting_text:n,primary_image:o,user:i}=t,l={image:o.original_info,crop:o.focus_rects||[]};return a.createElement(c.a,{dataSaverMode:!1,description:n,isFollowing:!1,listId:s,media:l,name:r,user:i,withHoverCard:!1,withSubscribe:!1})}default:return null}}get isDisabled(){return!!this.props.isDisabled}}n()(Z,"contextType",l.a);const ee=g.a.create(e=>({root:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},checkIcon:{color:e.colors.primary},noResult:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small},loaded:{opacity:1},focused:{backgroundColor:e.colors.faintGray},transitionStyles:{transitionProperty:"opacity",transitionDuration:"250ms",opacity:0}})),te=({isSelected:e})=>e?a.createElement(i.a,{importantForAccessibility:"no-hide-descendants",style:ee.checkIcon}):null;t.b=Z},aA19:function(e,t,s){"use strict";var r=s("ERkP"),n=s("aWyx"),a=s("XnpN"),o=s("rHpw"),i=s("9Xij"),c=s("cm6r"),l=s("TIdA"),d=s("A91F"),h=s("oSwX"),u=s("U+bB"),p=s("MWbm");const m=o.a.create(e=>({root:{borderRadius:e.borderRadii.infinite,overflow:"hidden"},container:{height:"auto",overflow:"hidden",width:"100%"},image:{borderRadius:0}})),f=o.a.create(e=>({container:{flexDirection:"row"},left:{flex:1},right:{flex:1,marginLeft:e.borderWidths.small,marginRight:`calc(-1 * ${e.borderWidths.small})`}})),_=o.a.create(e=>({container:{flexDirection:"column"},top:{flex:1,marginBottom:e.borderWidths.small},bottom:{flex:1}})),y=({left:e,right:t})=>r.createElement(p.a,{style:f.container},r.createElement(p.a,{style:f.left},e),r.createElement(p.a,{style:f.right},t)),b=({top:e,bottom:t})=>r.createElement(p.a,{style:_.container},r.createElement(p.a,{style:_.top},e),r.createElement(p.a,{style:_.bottom},t));class S extends r.Component{render(){const{link:e,conversation:t,perspective:s}=this.props,n=t&&t.avatar_image_https,o=t?Object(a.a)(t,s).map(({user:e})=>e):[],l=o.slice(0,3),d=this._avatarFromGroup(t)||this._avatarFromSrc(n)||this._avatarFromParticipants(l),h=e||this._defaultLink(t,o);return d?r.createElement(i.a,{ratio:1,style:m.root},h?r.createElement(c.a,{interactiveStyles:null,link:h},d):d):null}_defaultLink(e,t){if(e)return e.type===n.a.GROUP?`/messages/${e.conversation_id}/participants`:e.type===n.a.ONE_TO_ONE?"/"+t[0].screen_name:void 0}_avatarFromGroup(e){const t=e&&e.avatar&&e.avatar.image&&e.avatar.image.original_info;return t?r.createElement(l.a,{accessibilityLabel:"",aspectMode:d.a.SQUARE,backgroundColor:o.a.theme.colors.fadedGray,image:t,rounded:!0}):null}_avatarFromSrc(e){return e?r.createElement(u.a,{source:e}):null}_avatarFromParticipants(e){const t=e.length;return 0===t?null:1===t?this._singleParticipantAvatar(e[0]):this._multipleParticipantAvatar(e)}_singleParticipantAvatar(e){const{size:t}=this.props;return r.createElement(p.a,{key:e.id_str,style:m.container},r.createElement(h.default,{importantForAccessibility:"no-hide-descendants",size:t||"xxLarge",style:m.image,uri:e.profile_image_url_https}))}_multipleParticipantAvatar(e){const t=e.length,s=e.map((e,s)=>{const n=2===t||3===t&&0===s?.5:1;return r.createElement(p.a,{key:e.id_str,style:m.container},r.createElement(h.default,{aspectRatio:n,circle:!1,importantForAccessibility:"no-hide-descendants",size:"custom",style:m.image,uri:e.profile_image_url_https}))});if(2===t)return r.createElement(y,{left:s[1],right:s[0]});{const e=r.createElement(b,{bottom:s[2],top:s[1]}),t=s[0];return r.createElement(y,{left:e,right:t})}}}t.a=S},aWyx:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"d",(function(){return o}));const r=Object.freeze({ONE_TO_ONE:"ONE_TO_ONE",GROUP:"GROUP_DM"}),n=Object.freeze({AT_END:"AT_END",HAS_MORE:"HAS_MORE"}),a=Object.freeze({CONVERSATION_AVATAR_UPDATE:"conversation_avatar_update",CONVERSATION_NAME_UPDATE:"conversation_name_update",CONVERSATION_PROFILE_INFO_HEADER:"conversation_profile_info_header",CONVERSATION_READ:"conversation_read",DISABLE_NOTIFICATIONS:"disable_notifications",ENABLE_NOTIFICATIONS:"enable_notifications",JOIN_CONVERSATION:"join_conversation",MARK_ALL_AS_READ:"mark_all_as_read",MENTION_NOTIFICATIONS_UPDATE:"mention_notifications_setting_update",MESSAGE:"message",MESSAGE_DELETE:"message_delete",MESSAGE_MARK_AS_NOT_SPAM:"message_unmark_as_spam",MESSAGE_MARK_AS_SPAM:"message_mark_as_spam",PARTICIPANTS_JOIN:"participants_join",PARTICIPANTS_LEAVE:"participants_leave",REACTION_CREATE:"reaction_create",REACTION_DELETE:"reaction_delete",READ_ONLY_INDICATOR:"read_only_indicator",REMOVE_CONVERSATION:"remove_conversation",TRUST_CONVERSATION:"trust_conversation",TYPING_INDICATOR:"typing_indicator",WELCOME_MESSAGE:"welcome_message_create"}),o=Object.freeze({MUTUAL_FRIENDS:"mutual_friends"})},bJYH:function(e,t,s){"use strict";s.r(t),s.d(t,"GenericTypeaheadComposeWrapper",(function(){return x}));s("IAdD");var r=s("KEM+"),n=s.n(r),a=s("ERkP"),o=s("oEoC"),i=s("aWzz"),c=s("oQhu"),l=s("7nmT"),d=s.n(l),h=s("7JQg"),u=s("WPfJ"),p=s("OEYw"),m=s("MWbm"),f=s("Irs7"),_=s("0FVZ"),y=s("xoZN"),b=s("rHpw"),S=s("GZwR");const g={component:"compose"},I=[S.a.Users],v=[S.a.Topics];let E=0;class x extends a.Component{constructor(e,t){super(e,t),n()(this,"_typeaheadActive",!1),n()(this,"_renderTypeaheadDropdown",e=>{const{contextText:t,isInline:s,onSelectItem:r,source:n}=this.props,{isModal:o}=this.context,i=e.resultType===S.a.Topics?"hashtag":void 0,c=a.createElement(p.a,{ariaDescendantId:this.state.ariaDescendantId,contextText:t,domId:this._dropdownDomId,filter:this._getFilter(e.resultType),maxTopics:8,onItemClick:r,onItemFocusChanged:this._handleItemFocusChanged,onRef:this._handleTypeaheadRef,query:e.word,source:n,style:this._calcStyle(),topicType:i,withItemAlwaysSelected:!0});return o||s?a.createElement(_.a.HalfSheet,null,a.createElement(h.b,{namespace:g},a.createElement(a.Fragment,null,a.createElement(m.a,{onClick:this._handleDismiss,style:w.mask}),c))):a.createElement(a.Fragment,null,a.createElement(m.a,{onClick:this._handleDismiss,style:w.mask}),c)}),n()(this,"render",()=>{const{children:e,query:t}=this.props,s=a.cloneElement(e,{ariaAutocomplete:"list",ariaControls:this._dropdownDomId,ariaActiveDescendant:this.state.ariaDescendantId,ref:t=>{this._textInputNode=d.a.findDOMNode(t),this._textInputRef=t;const{ref:s}=e;s&&s(t)}});return a.createElement(m.a,{style:w.inputContainer},a.createElement(y.a,{onKeyDown:this._handleKeyDown},s,this._textInputNode&&t?this._renderTypeaheadDropdown(t):null))}),n()(this,"_getFilter",e=>"users"===e?I:v),n()(this,"_calcStyle",()=>{const{isModal:e}=this.context,{isInline:t}=this.props,s=this._textInputNode,r=window.innerHeight,n=window.innerWidth,a=this._textInputRef&&this._textInputRef.getTextInputHeight()||20;if(s instanceof window.HTMLElement){const o=s.getBoundingClientRect();return e||t?[this._getDropdownPositioningStyle(r,n,o.top,o.top+a,o.left),w.dropdownStyle]:[this._getInlinePositioningStyle(a),w.inlineStyle]}return[this._getDropdownPositioningStyle(a,n,0,0,0),w.dropdownStyle]}),n()(this,"_handleKeyDown",e=>{const{selectedItem:t}=this.state,{onSelectItem:s,query:r}=this.props,{key:n}=e;o.e(e)&&r&&("ArrowDown"===n?(this._typeaheadRef&&this._typeaheadRef.focusNext(),e.preventDefault()):"ArrowUp"===n?(this._typeaheadRef&&this._typeaheadRef.focusPrevious(),e.preventDefault()):"Enter"===n||"Tab"===n?t&&(s(t),e.preventDefault()):"Escape"===n&&(this._handleDismiss(),e.preventDefault()))}),n()(this,"_handleItemFocusChanged",e=>this.setState({ariaDescendantId:o.b(),selectedItem:e})),n()(this,"_handleTypeaheadRef",e=>{this._typeaheadRef=e}),n()(this,"_handleDismiss",()=>{this._textInputRef&&this._textInputRef.focus(),this.props.onDismiss()}),n()(this,"_getDropdownHeight",Object(c.a)((e,t)=>{const s=50*e/100;return s>t?t:s})),n()(this,"_getDropdownPositioningStyle",Object(c.a)((e,t,s=0,r=0,n=0)=>{const a=e-r,o=s,i=o>a,c=a/e<.5,l=t-n-10,d=Math.min(l,300);return c&&i?{bottom:e-s+"px",left:n+"px",maxHeight:this._getDropdownHeight(e,o-10)+"px",maxWidth:l+"px",minWidth:d+"px"}:{top:r+"px",left:n+"px",maxHeight:this._getDropdownHeight(e,a-10)+"px",maxWidth:l+"px",minWidth:d+"px"}})),n()(this,"_getInlinePositioningStyle",Object(c.a)(e=>({position:"absolute",top:(e||0)+"px",overflowX:"hidden",overflowY:"auto"}))),this.state={ariaDescendantId:o.b()},this._dropdownDomId="typeaheadDropdownWrapped-"+E,E+=1}componentDidUpdate(){const{onTypeaheadStateChange:e,query:t}=this.props,s=!(!this._textInputNode||!t);s!==this._typeaheadActive&&(this._typeaheadActive=s,e&&e(s))}resetSelectedItem(){this.setState({selectedItem:void 0})}}n()(x,"contextTypes",{isModal:i.bool}),n()(x,"defaultProps",{source:S.d.Compose});const w=b.a.create(e=>({dropdownStyle:{backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.medium,boxShadow:e.boxShadows.medium,minHeight:100,position:"fixed",overflowX:"hidden",overflowY:"auto"},mask:Object.assign({},b.a.absoluteFillObject,{position:"fixed"}),inlineStyle:{backgroundColor:e.colors.cellBackground,right:0,left:0,borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,minHeight:100},inputContainer:{flexGrow:1,position:"static",width:"100%",zIndex:u.g}}));t.default=Object(f.a)(x,g)},hiGS:function(e,t,s){"use strict";s("IAdD");var r=s("ERkP"),n=s("Lsrn"),a=s("k/Ka");const o=(e={})=>Object(a.a)("svg",Object.assign({},e,{style:[n.a.root,e.style],viewBox:"0 0 24 24"}),r.createElement("g",null,r.createElement("path",{d:"M20.746 5.236h-3.75V4.25c0-1.24-1.01-2.25-2.25-2.25h-5.5c-1.24 0-2.25 1.01-2.25 2.25v.986h-3.75c-.414 0-.75.336-.75.75s.336.75.75.75h.368l1.583 13.262c.216 1.193 1.31 2.027 2.658 2.027h8.282c1.35 0 2.442-.834 2.664-2.072l1.577-13.217h.368c.414 0 .75-.336.75-.75s-.335-.75-.75-.75zM8.496 4.25c0-.413.337-.75.75-.75h5.5c.413 0 .75.337.75.75v.986h-7V4.25zm8.822 15.48c-.1.55-.664.795-1.18.795H7.854c-.517 0-1.083-.246-1.175-.75L5.126 6.735h13.74L17.32 19.732z"}),r.createElement("path",{d:"M10 17.75c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75zm4 0c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75z"})));o.metadata={width:24,height:24},t.a=o},kIAd:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));var r=s("0vv5");const n=500,a={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:s.n(r).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},o52z:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var r=s("VPAj");const n=Object(r.a)([]);Object(r.a)({})},oEoC:function(e,t,s){"use strict";s.d(t,"d",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return o})),s.d(t,"e",(function(){return i})),s.d(t,"a",(function(){return c}));s("IAdD"),s("WNMA"),s("LJOr"),s("tVqn"),s("kYxP");var r=s("kIAd");function n(e,t){let s;const n=r.b.scoper.find(r=>{if(-1!==r.srcInputs.indexOf(t))return s=e.match(r.regexp),s});let a="";return s&&(a=s&&(1===s.length?s[0]:s[1])),n?Object.assign({},n.scope,{src:t,q:a}):null}function a(e,t){const s=t.slice(0,e),n=t.slice(e,t.length),a=s.search(r.b.WordEnd),o=(a>=0?s.slice(a):"")+n.slice(0,n.search(r.b.WordBoundary));return o.trim()?{start:a,word:o}:{start:-1,word:""}}function o(){return"typeaheadFocus-"+Math.random()}function i(e){const{altKey:t,ctrlKey:s,metaKey:r}=e;return!(t||s||r)}function c(e,t){const s=[];e.forEach(e=>{const r=t.find(t=>t.id===e.id);r&&r.data&&r.data.result_context?s.push(r):s.push(e)});const r=s.map(e=>e.id),n=t.filter(e=>r.indexOf(e.id)<0);return[...s,...n]}},p9G8:function(e,t,s){"use strict";s.d(t,"b",(function(){return p}));s("kYxP");var r=s("aWyx"),n=s("wrlS"),a=s("XnpN"),o=s("3XMw"),i=s.n(o);const c=i.a.g755fcde,l=i.a.f6b1ff81,d=i.a.d27cf5ef,h=i.a.i3b60816,u=i.a.fc0cd235;t.a=(e,t)=>{const{type:s,name:n,participants:o={}}=e;if(s===r.a.GROUP&&n)return n;if(!Object.keys(o).length)return;const i=Object(a.a)(e,t).map(({user:e})=>e);return p(i,t,s)};const p=(e=[],t,s=r.a.GROUP)=>{const a=e.filter(e=>e.id_str!==t),[o,...i]=a;switch(a.length){case 0:return c;case 1:return s===r.a.GROUP?l({name:o.name}):o.name;case 2:return d({name1:o.name,name2:i[0].name});default:if(n.a.isTrue("responsive_web_dm_health_convo_group_changes_enabled")){const e=a.map(e=>e.name).join(", ");return u({names:e})}return h({name:o.name,count:i.length})}}},rRIm:function(e,t,s){"use strict";s.d(t,"b",(function(){return R}));s("IAdD"),s("LJOr"),s("kYxP");var r=s("KEM+"),n=s.n(r),a=s("ERkP"),o=s("sTyV"),i=s("rxPX"),c=s("G6rE"),l=Object(i.a)().propsFromState(()=>({loggedInUser:c.e.selectLoggedInUser})).adjustStateProps(({loggedInUser:e})=>({loggedInUserScreenName:e?e.screen_name:void 0})),d=s("3XMw"),h=s.n(d),u=s("V/Zl"),p=s("OrGc"),m=s("QK5w"),f=s("aITJ"),_=s("MWbm"),y=s("TnY3"),b=s("rHpw"),S=s("t62R"),g=s("uScj"),I=s("BcsE");s("aWzz");const v=h.a.b47e760d,E=h.a.fd2c7b43,x=new g.a,w=e=>{if(e.target instanceof HTMLInputElement){const t=e.target.tagName.toLowerCase();return"input"===t||"textarea"===t}return!1},R=e=>x.subscribe(e).unsubscribe;class C extends a.Component{constructor(...e){super(...e),n()(this,"_bindKeyboardShortcuts",()=>{const{history:e,loggedInUserScreenName:t}=this.props,s=t=>s=>{s.preventDefault(),x._listeners.length?x.notify(t):e.push({pathname:"/explore",state:{searchFocused:!0,searchPrefill:t}})},r={[p.d.search]:s(),[p.d.goToUser]:s("@"),[p.d.openKeyboardShortcuts]:()=>e.push("/i/keyboard_shortcuts"),[p.d.goExplore]:()=>e.push("/explore"),[p.d.goSettings]:()=>e.push("/settings")},n=t?{[p.d.goProfile]:()=>e.push("/"+t),[p.d.goLikes]:()=>e.push(`/${t}/likes`),[p.d.goLists]:()=>e.push(`/${t}/lists`)}:{},a=Object.assign({},r,n,{[p.d.goHome]:()=>e.push("/home"),[p.d.goDisplay]:()=>e.push("/i/display"),[p.d.goNotifications]:()=>e.push("/notifications"),[p.d.goMentions]:()=>e.push("/notifications/mentions"),[p.d.goMessages]:()=>e.push("/messages"),[p.d.newMessage]:()=>e.push("/messages/compose"),[p.d.newTweet]:()=>e.push("/compose/tweet"),[p.d.goBookmarks]:()=>e.push("/i/bookmarks")}),i=this.props.loggedInUserScreenName?a:r;this._unbindKeyboardShortcuts=Object(o.a)(i)}),n()(this,"_handleKeyDown",e=>{w(e)||"Backspace"!==e.key||(this._backspaceDown=Date.now(),e.preventDefault(),e.stopPropagation())}),n()(this,"_handleKeyUp",e=>{if(!w(e)&&"Backspace"===e.key){e.preventDefault(),e.stopPropagation();const t=this._backspaceDown,s=!!Object(I.a)(t)&&Date.now()-t<500,r=Object(m.a)({},{location:this.props.location});s&&r?this.props.history.goBack():window.close()}})}componentDidMount(){this._bindKeyboardShortcuts(),f.a.isKaiOS()&&Object(u.a)()&&(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp))}componentWillUnmount(){this._unbindKeyboardShortcuts&&this._unbindKeyboardShortcuts(),f.a.isKaiOS()&&Object(u.a)()&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp))}render(){return this.props.loggedInUserScreenName?a.createElement(_.a,{accessibilityRole:"heading","aria-level":"2",style:b.a.visuallyHidden},a.createElement(S.c,null,v),a.createElement(S.c,{importantForAccessibility:"no",link:"/i/keyboard_shortcuts"},E)):null}}const O=l(C);t.a=Object(y.a)(O)},sYRn:function(e,t,s){"use strict";var r=s("ERkP"),n=s("eb3s"),a=s("3XMw"),o=s.n(a);const i=o.a.hffea05c,c=o.a.j037e373,l=o.a.d96cf7cd;t.a=({onCancel:e,onConfirm:t})=>r.createElement(n.a,{confirmButtonLabel:l,confirmButtonType:"destructive",headline:i,onCancel:e,onConfirm:t,text:c})},v4XE:function(e,t,s){"use strict";s.d(t,"d",(function(){return p})),s.d(t,"c",(function(){return m})),s.d(t,"a",(function(){return f})),s.d(t,"b",(function(){return _}));s("IAdD"),s("JtPf"),s("kYxP");var r=s("kGix"),n=s("Ssj5"),a=s("RqPI"),o=s("oEOe");const i="rweb/savedSearches",c={fetchStatus:r.a.NONE,savedSearches:[]},l=Object(o.a)(i,"FETCH_SAVED_SEARCHES"),d=Object(o.a)(i,"SAVE_SEARCH"),h=Object(o.a)(i,"DELETE_SAVED_SEARCH");function u(e=c,t){switch(t.type){case l.SUCCESS:return Object.assign({},e,{fetchStatus:r.a.LOADED,savedSearches:t.payload});case l.FAILURE:return Object.assign({},e,{fetchStatus:r.a.FAILED});case d.SUCCESS:return Object.assign({},e,{savedSearches:[...e.savedSearches,t.payload]});case h.SUCCESS:return Object.assign({},e,{savedSearches:e.savedSearches.filter(e=>e.id_str!==t.payload.id_str)});default:return e}}n.a.register({savedSearches:u});const p=e=>e.savedSearches.savedSearches,m=e=>(t,s,{api:r})=>Object(o.b)(t,{request:r.SavedSearches.create,params:{query:e}})({actionTypes:d,context:"SAVE_SEARCH"}),f=e=>(t,s,{api:r})=>Object(o.b)(t,{request:r.SavedSearches.destroy,params:{id:e}})({actionTypes:h,context:"DELETE_SAVED_SEARCH"}),_=()=>(e,t,{api:s})=>{const n=t();if(!Object(a.e)(n))return Promise.resolve();return(e=>e.savedSearches.fetchStatus)(n)===r.a.LOADED?Promise.resolve():e((e,t,{api:s})=>Object(o.b)(e,{request:s.SavedSearches.fetch,params:{}})({actionTypes:l,context:"FETCH_SAVED_SEARCHES"}))}},wtjx:function(e,t,s){"use strict";s.d(t,"g",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"e",(function(){return d})),s.d(t,"d",(function(){return m})),s.d(t,"b",(function(){return _})),s.d(t,"a",(function(){return b})),s.d(t,"c",(function(){return S}));s("IAdD"),s("JtPf");var r=s("Ssj5"),n=s("RqPI");const a=e=>(t,s,{userPersistence:r})=>r.set("rweb.recentSearches",{recentSearches:e}).catch(()=>{Promise.resolve()}),o=(e,t)=>{let s=[];if(e&&e.user){const r=e.user;s=t.filter(e=>e.keyword||e.user&&e.user.id!==r.id)}else if(e&&e.keyword){const r=e.keyword;s=t.filter(e=>e.keyword&&e.keyword.query!==r.query||e.user)}return s},i={fetched:!1,recentSearches:[]};const c=e=>e.recentSearches.recentSearches,l=e=>c(e)[0]||null,d=e=>e.recentSearches.fetched,h="rweb/recentSearches/INIT_FROM_CACHE",u=e=>({type:h,payload:e}),p="rweb/recentSearches/REMOVE_QUERY",m=e=>(t,s,{userPersistence:r})=>{t({payload:e,type:p});const o=s().recentSearches;return Object(n.e)(s())?t(a(o.recentSearches)):Promise.resolve()},f="rweb/recentSearches/CLEAR_ALL",_=()=>(e,t,{userPersistence:s})=>{e({type:f});const r=t().recentSearches;return Object(n.e)(t())?e(a(r.recentSearches)):Promise.resolve()},y="rweb/recentSearches/ADD_QUERY",b=e=>(t,s,{userPersistence:r})=>{t({payload:e,type:y});const o=s().recentSearches;return Object(n.e)(s())?t(a(o.recentSearches)):Promise.resolve()},S=()=>(e,t,{userPersistence:s})=>t().recentSearches.fetched?Promise.resolve():e((e,t,{userPersistence:s})=>{const r=t();return Object(n.e)(r)?s.get("rweb.recentSearches").then(t=>{e(u(t))}).catch(()=>{e(u())}):(e(u()),Promise.resolve())});r.a.register({recentSearches:function(e=i,t){switch(t.type){case y:{const s=t.payload,r=s?o(s,e.recentSearches):[];return r.length>49&&r.splice(49,1),s&&r.unshift(s),Object.assign({},e,{recentSearches:r})}case p:{const s=t.payload,r=s?o(s,e.recentSearches):[];return Object.assign({},e,{recentSearches:r})}case f:return{fetched:!0,recentSearches:[]};case h:return Object.assign({},e,t.payload,{fetched:!0});default:return e}}})}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.Typeahead.81d05ef5.js.map