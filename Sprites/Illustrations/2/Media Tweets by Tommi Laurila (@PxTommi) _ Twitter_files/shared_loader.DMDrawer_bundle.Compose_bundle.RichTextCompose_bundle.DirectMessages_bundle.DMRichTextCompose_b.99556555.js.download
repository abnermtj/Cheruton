(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+/sI":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var s=n("ERkP"),a=n("TGcR"),r=n("t62R"),i=n("a6qo"),o=n("rHpw");const c="animated_gif",d="video";class l extends s.PureComponent{render(){const{durationInMilliseconds:e,type:t}=this.props;let n;if(t===c||"vine"===t)n=t===c?s.createElement(r.c,{weight:"bold"},"GIF"):s.createElement(a.a,{style:u.icon});else if(t===d&&e){const t=Math.trunc(e/6e4),a=("0"+Math.trunc(e%6e4/1e3)).slice(-2);n=s.createElement(r.c,{color:"white"},`${t}:${a}`)}return n?s.createElement(i.a,{align:"left"},n):null}}const u=o.a.create(e=>({icon:{color:e.colors.white}}));t.c=l},"3A2y":function(e,t,n){"use strict";var s=n("zrOZ");t.a=(e,t)=>{const n=Object(s.a)(Array.isArray(t)?t:[t]);return Object.keys(e).reduce((t,s)=>(n.has(s)||(t[s]=e[s]),t),{})}},"6OUF":function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));n("IAdD"),n("kYxP");var s=n("97Jx"),a=n.n(s),r=n("LdEA"),i=n.n(r),o=n("KEM+"),c=n.n(o),d=(n("aWzz"),n("ERkP")),l=n("t62R"),u=n("/yvb"),p=n("Lsrn"),_=n("k/Ka");const m=(e={})=>Object(_.a)("svg",Object.assign({},e,{style:[p.a.root,e.style],viewBox:"0 0 15 15"}),d.createElement("g",null,d.createElement("path",{d:"M8.914 7.5l5.793-5.793c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0L7.5 6.086 1.707.293c-.39-.39-1.023-.39-1.414 0s-.39 1.023 0 1.414L6.086 7.5.293 13.293c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L7.5 8.914l5.793 5.793c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L8.914 7.5z"})));m.metadata={width:15,height:15};var h=m,b=n("oQhu"),E=n("rHpw"),f=n("aITJ"),O=n("MWbm"),y=n("ioan");class I extends d.Component{constructor(...e){super(...e),c()(this,"_blurOnBackspaceKeyUpForKaiOS",!1),c()(this,"state",{isFocused:!1}),c()(this,"getContainerStyle",()=>{const{styleType:e,multiline:t,invalid:n}=this.props,{isFocused:s}=this.state;return"pill"===e?[!n&&!s&&v.transparent,!s&&j.fadedGrayColor,!t&&g.infinite,j.root,n&&v.invalid,!n&&s&&v.focused,s&&j.transparentColor,t&&g.round]:[v.none,j.root,j.fadedGrayColor]}),c()(this,"_getTextInputStyle",Object(b.a)(e=>[A.root,e])),c()(this,"_handleBlur",e=>{const{onBlur:t}=this.props;this.setState({isFocused:!1}),t&&t(e)}),c()(this,"_handleClear",e=>{this.props.focusOnClear&&this.focus(),this._textInput&&this._textInput.clear()}),c()(this,"_handleChange",e=>{const{onChange:t}=this.props,{isFocused:n}=this.state;n||this.setState({isFocused:!0}),t&&t(e)}),c()(this,"_handleFocus",e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t(e)}),c()(this,"_handleKeyPress",e=>{const{multiline:t,onKeyPress:n,onSubmitEditing:s}=this.props;n&&n(e),e.isDefaultPrevented()||"Enter"!==e.key||e.shiftKey||t||!s||(e.preventDefault(),s(e))}),c()(this,"_handleKeyDown",e=>{const{onKeyDown:t}=this.props,n=0===this.getValue().length;f.a.isKaiOS()&&"Backspace"===e.key&&n?this._blurOnBackspaceKeyUpForKaiOS=n:t&&t(e)}),c()(this,"_handleKeyUp",e=>{const{onKeyUp:t}=this.props;f.a.isKaiOS()&&"Backspace"===e.key&&this._blurOnBackspaceKeyUpForKaiOS&&(e.preventDefault(),this.blur()),t&&t(e)}),c()(this,"_setTextInputRef",e=>{this._textInput=e}),c()(this,"_setRichTextInputRef",e=>{this._richTextInput=e})}render(){const{appTextSize:e,emojiPickerButton:t,onLayout:n,contentAbove:s,contentBelow:a,editable:r,style:i,richTextInputContext:o,withClearButton:c}=this.props;return d.createElement(O.a,{onBlur:this._handleBlur,onFocus:this._handleFocus,onLayout:n,style:[this.getContainerStyle(),!r&&j.disabled,i]},s,d.createElement(O.a,{style:j.textInput},this._renderIcon(),d.createElement(l.c,{size:e,style:j.appText},o?this._renderRichTextInput():this._renderTextInput()),d.createElement(O.a,{style:[C.root,t&&C.withEmojiPicker]},this._renderCloseButton(),this._renderEmojiPicker(),c&&this._renderClearButton())),a)}_renderIcon(){const{Icon:e,iconStyle:t}=this.props,{isFocused:n}=this.state,s=[S.root,n&&S.focused,t];return e?d.createElement(O.a,{style:C.leftIcon},d.createElement(e,{style:s})):null}_renderTextInput(){const e=this.props,{inputStyle:t}=e,n=i()(e,["Icon","appTextSize","focusOnClear","handleReturn","iconStyle","inputStyle","invalid","keyCommandHandlers","onLayout","onSubmitEditing","closeButton","contentAbove","contentBelow","emojiPickerButton","richTextInputContext","style","styleType","withClearButton"]);return d.createElement(d.Fragment,null,f.a.isEdge()?d.createElement("style",null,"input[type=text]::-ms-clear { display: none; }"):null,d.createElement(y.a,a()({},n,{onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,placeholderTextColor:E.a.theme.colors.deepGray,ref:this._setTextInputRef,style:this._getTextInputStyle(t)})))}_renderRichTextInput(){const{ariaAutocomplete:e,ariaControls:t,ariaActiveDescendant:n,autoFocus:s,ariaLabel:a,inputStyle:r,keyCommandHandlers:i,numberOfLines:o,maxNumberOfLines:c,multiline:l,onFilesAdded:u,placeholder:p,positionCursorAtEnd:_,richTextInputContext:m,handleReturn:h,testID:b}=this.props,{dismissComposerCommandName:E,editorState:f,element:y,sendTweetCommandName:I}=m||{},g=[A.root,A.rich];return y&&f?d.createElement(O.a,{style:[A.richContainer,r]},d.createElement(y,{ariaActiveDescendant:n,ariaAutocomplete:e,ariaControls:t,ariaLabel:a,autoFocus:s,dismissComposerCommandName:E,editorState:f,handleReturn:h,keyCommandHandlers:i,maxNumberOfLines:c,multiline:l,numberOfLines:o,onBlur:this._handleBlur,onChange:this._handleChange,onFilesAdded:u,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,placeholder:p,positionCursorAtEnd:_,ref:this._setRichTextInputRef,sendTweetCommandName:I,style:g,testID:b})):null}_renderClearButton(){const e=d.createElement(u.a,{accessible:!1,icon:d.createElement(h,{style:T.icon}),onPress:this._handleClear,size:"smallCompact",style:T.root,type:"primary"});return this.getValue()?e:d.createElement(O.a,null)}_renderEmojiPicker(){const{emojiPickerButton:e}=this.props;return e?d.createElement(O.a,null,e):null}_renderCloseButton(){const{closeButton:e}=this.props;return e?d.createElement(O.a,{style:C.closeButton},e):null}applyFinalValue(e){this.focus(),window.requestAnimationFrame(()=>{this.blur(),e(this.getValue())})}blur(){this._richTextInput&&this._richTextInput.blur(),this._textInput&&this._textInput.blur()}focus(){this._richTextInput&&this._richTextInput.focus(),this._textInput&&this._textInput.focus()}getValue(){const{richTextInputContext:e,value:t}=this.props;return e?this._richTextInput&&this._richTextInput.value()||t||"":this._textInput&&this._textInput.getValue()||t||""}getTextInputHeight(){const{richTextInputContext:e}=this.props,t=2*parseInt(E.a.theme.spaces.xSmall,10),n=2*parseInt(E.a.theme.borderWidths.small,10);return e?this._richTextInput&&this._richTextInput.getOffsetHeight()+t+n:this._textInput&&this._textInput.getOffsetHeight()+n}}c()(I,"defaultProps",{appTextSize:"normal",autoComplete:"on",styleType:"pill",autoCorrect:!0,editable:!0,focusOnClear:!0,withClearButton:!1}),I.propTypes={};const g=E.a.create(e=>({infinite:{borderRadius:e.borderRadii.infinite},round:{borderRadius:`calc(${e.borderRadii.large} + ${e.borderWidths.small} * 2)`},none:{borderRadius:0}})),v=E.a.create(e=>({transparent:{borderColor:e.colors.transparent,borderStyle:"solid",borderWidth:e.borderWidths.small},focused:{borderColor:e.colors.primary,borderStyle:"solid",borderWidth:e.borderWidths.small},invalid:{borderColor:e.colors.red,borderStyle:"solid",borderWidth:e.borderWidths.small},none:{borderWidth:0}})),A=E.a.create(e=>({root:{backgroundColor:"transparent",borderRadius:0,borderWidth:0,boxSizing:"border-box",color:"inherit",outlineStyle:"none",fontFamily:"inherit",fontSize:"inherit",padding:e.spaces.xSmall,textAlign:"inherit"},richContainer:{width:"100%",padding:e.spaces.xSmall},rich:{padding:0}})),S=E.a.create(e=>({root:{color:e.colors.deepGray,minWidth:e.spaces.large,paddingLeft:e.spaces.xSmall},focused:{color:e.colors.primary}})),T=E.a.create(e=>({root:{borderWidth:0,marginRight:e.spaces.xSmall},icon:{width:"10px",height:"10px",color:e.colors.cellBackground}})),C=E.a.create(e=>({root:{display:"flex",justifyContent:"center"},withEmojiPicker:{display:"flex",justifyContent:"flex-end",flexDirection:"column"},closeButton:{flexGrow:1},leftIcon:{display:"flex",justifyContent:"center"}})),j=E.a.create(e=>({root:{flexDirection:"column",flexGrow:1,flexShrink:1,justifyContent:"center"},disabled:{cursor:"default",opacity:.8},fadedGrayColor:{backgroundColor:e.colors.fadedGray},transparentColor:{backgroundColor:"transparent"},textInput:{flexDirection:"row"},appText:{display:"flex",flexGrow:1}}))},"7myi":function(e,t,n){"use strict";n("kYxP");var s=n("KEM+"),a=n.n(s),r=n("ERkP"),i=n("oEoC"),o=n("2dXj"),c=n("GZwR");class d extends r.Component{constructor(...e){super(...e),a()(this,"_genericWrapperRef",r.createRef()),a()(this,"state",{queryContext:void 0,canShowTypeahead:!1}),a()(this,"render",()=>{const{contextText:e,children:t,isInline:n,onTypeaheadStateChange:s,source:a}=this.props,{queryContext:i,canShowTypeahead:d}=this.state,l=d&&i?{word:i.word,resultType:i.resultType}:void 0;return r.createElement(o.a,{componentRef:this._genericWrapperRef,contextText:e,isInline:n,onDismiss:this._handleDismiss,onSelectItem:this._handleSelectItem,onTypeaheadStateChange:s,query:l,source:a||c.d.Compose},t(this._handleInputChange))}),a()(this,"_handleSelectItem",e=>{const{onTextUpdated:t}=this.props,{queryContext:n}=this.state;if(n){const s="users"===n.resultType&&"user"===e.type?`@${e.data.screen_name} `:(e.data.topic||e.data.text||"")+" ",{newCursor:a,newTweetText:r}=this._replaceToken(s,n);t({target:{value:r}}),this._updateDOMTextArea(a,r)}this._setQueryContext(void 0)}),a()(this,"_updateDOMTextArea",(e,t)=>{this._textAreaRef&&(this._textAreaRef.value=t,this._textAreaRef.selectionStart=e,this._textAreaRef.selectionEnd=e,this._textAreaRef.focus())}),a()(this,"_handleInputChange",e=>{const t=e&&(e.currentTarget||e.target),{queryContext:n}=this.state;this._textAreaRef=t;const s=n&&n.word,a=t.value,{word:r,start:o}=i.c(t.selectionStart,a),c=i.d(r||"","compose");if((null==c?void 0:c.q)!==s)if(this._genericWrapperRef.current&&this._genericWrapperRef.current.resetSelectedItem(),-1===o)this._setQueryContext(void 0);else if(c){const{q:e,result_type:n}=c;this._setQueryContext({word:e,resultType:n,cursorPosition:t.selectionStart,fullText:t.value,startIndex:o})}else this._setQueryContext(void 0)}),a()(this,"_setQueryContext",e=>this.setState({queryContext:e,canShowTypeahead:!!e})),a()(this,"_handleDismiss",()=>this.setState({canShowTypeahead:!1}))}_replaceToken(e,t){const{fullText:n,startIndex:s}=t,a=n.slice(0,s),r=t.cursorPosition;return{newTweetText:a+e+n.slice(r),newCursor:a.length+e.length}}}t.a=d},KqB4:function(e,t,n){"use strict";var s=n("IGGJ");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=[],s=(0,a.default)(e,t),r=0;r<s.length;r++)n.push(s[r].url);return n};var a=s(n("vwfs"));e.exports=t.default},LfYE:function(e,t,n){e.exports=n.p+"twemoji_sprite_high_res.043c66d5.png"},MLl7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r}));const s=Object.freeze({Composition:"composition",DMComposition:"dm_composition"}),a=e=>Object.values(s).indexOf(e)>=0,r=(e,t)=>"boolean"==typeof e?e:t},VPdC:function(e,t,n){"use strict";n.d(t,"b",(function(){return A}));var s=n("97Jx"),a=n.n(s),r=n("LdEA"),i=n.n(r),o=n("KEM+"),c=n.n(o),d=n("ERkP"),l=n("3XMw"),u=n.n(l),p=n("cjZk"),_="fileInput",m=n("sjK1"),h=(n("kYxP"),n("/yvb")),b=n("k/Ka"),E=n("rHpw");class f extends d.Component{constructor(...e){super(...e),c()(this,"_handlePress",e=>{const{onPress:t}=this.props;t&&t(e),this._fileInput&&this._fileInput.click()}),c()(this,"_handleChange",e=>{const{onChange:t}=this.props,n=e.target,s=n.files;s.length&&t&&t(s),n.value=""}),c()(this,"_handleFileInputButtonRef",e=>{this._fileInput=e})}render(){const e=this.props,{accept:t,disabled:n,multiple:s,testID:r}=e,o=i()(e,["accept","disabled","multiple","onChange","testID"]);return d.createElement(d.Fragment,null,d.createElement(h.a,a()({},o,{disabled:n,onPress:this._handlePress})),Object(b.a)("input",{accept:t,disabled:n,multiple:s,onChange:this._handleChange,ref:this._handleFileInputButtonRef,style:O.input,tabIndex:-1,testID:r,type:"file"}))}}c()(f,"defaultProps",{disabled:!1,multiple:!1});const O=E.a.create(e=>({input:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}}));var y=f,I=n("9HgX");const g=u.a.b9960f31,v=d.createElement(p.a,null),A=({acceptGifs:e,acceptVideo:t})=>I.b.concat(e?[I.a]:[]).concat(t?m.a:[]);class S extends d.PureComponent{render(){const e=this.props,{acceptGifs:t,acceptVideo:n,style:s}=e,r=i()(e,["acceptGifs","acceptVideo","style"]),o=A({acceptGifs:t,acceptVideo:n}).join(",");return d.createElement(y,a()({},r,{accept:o,style:[T.root,s],testID:_}))}}c()(S,"defaultProps",{acceptGifs:!0,acceptVideo:!0,accessibilityLabel:g,icon:v,size:"normal"});const T=E.a.create(e=>({root:{margin:"-"+e.spaces.xSmall}}));t.a=S},VnFT:function(e,t,n){"use strict";n.d(t,"n",(function(){return v})),n.d(t,"m",(function(){return S})),n.d(t,"f",(function(){return C})),n.d(t,"d",(function(){return x})),n.d(t,"g",(function(){return R})),n.d(t,"e",(function(){return N})),n.d(t,"i",(function(){return P})),n.d(t,"j",(function(){return w})),n.d(t,"l",(function(){return U})),n.d(t,"h",(function(){return L})),n.d(t,"k",(function(){return B})),n.d(t,"a",(function(){return F})),n.d(t,"o",(function(){return G})),n.d(t,"b",(function(){return q})),n.d(t,"c",(function(){return z}));n("IAdD"),n("JtPf"),n("DZ+c"),n("kYxP");var s=n("LdEA"),a=n.n(s),r=n("AspN"),i=n("xPna"),o=n("oEOe"),c=n("xCUF"),d=n("ude7"),l=n("gpVt"),u=n("Ssj5"),p=n("fEA7"),_=n.n(p),m=n("uKEd"),h=n("lnti"),b=n("/NU0");const E=e=>"rweb/multiDraftDMs/"+e,f={};const O=e=>{const{conversation_id:t,id:n,localMediaId:s,recipient_ids:a,sender_id:r,text:i,attachment:o={},error:c}=e,d=Date.now().toString();return{conversation_id:t,recipient_ids:a,error:c,id:n,is_draft:!0,message_data:{attachment:o,localMediaId:s,sender_id:r,text:i,time:d},type:"message",time:d}},y=E("SEND_MESSAGE_REQUEST"),I=E("SEND_MESSAGE_SUCCESS"),g=E("SEND_MESSAGE_FAILURE"),v=e=>(t,n,{api:s})=>{const u=e||{},{senderId:p,cardUrl:E,conversationId:f,localMediaId:v,recipients:A=[],requestId:S=_.a.v1(),tweetAttachment:T,quickReply:C}=u,j=a()(u,["senderId","cardUrl","conversationId","localMediaId","recipients","requestId","tweetAttachment","quickReply"]);t(Y(f));const R=n(),D=v||M(n(),f),[N]=r.g(R,D),{mediaFile:P}=N||{},w=A.length>0&&A.join(","),U={};P&&P.isGif?U.extraInitParams="&media_category=dm_gif":P&&P.isVideo&&(U.extraInitParams="&media_category=dm_video");const k=r.k(D,U),F=[t(k)],V=L(R,f),{found_media_origin:G}=V||{},K=B(R,f);return P&&P.isGif&&F.push(Object(d.a)(P)),Promise.all(F).then(([[n],a])=>{const d=K&&Object.keys(K).length&&K[n.id]&&(K[n.id].altText||K[n.id].defaultAltText),u=!!d;return(n&&(G||u)?t(r.i(Object.assign({media_id:n.uploadId,found_media_origin:G},!!u&&{alt_text:{text:d}}))):Promise.resolve()).then(()=>{const{id_str:r}=T||{},d={};if(n){const{mediaFile:e={}}=n,t={original_info:{width:e.width,height:e.height},sizes:[{h:e.height,w:e.width,resize:"fit"}]};e.isImage?d.photo=Object.assign({},t,{media_url_https:e.url}):e.isGif?d.animated_gif=Object.assign({},t,{media_url_https:a,type:"animated_gif"}):e.isVideo&&(d.video=Object.assign({},t,{media_url_https:e.url,type:"video"}))}else T&&(d.tweet={status:r});const{uploadId:u}=n||{},_=O({attachment:d,conversation_id:f,id:S,recipient_ids:w,sender_id:p,text:e.text}),v=Object.assign({},j,Object(l.c)(E)&&{card_uri:E},{conversation_id:f,media_id:u,recipient_ids:w,request_id:S,tweet_id:r});C&&(v["quick_reply_response[options][id]"]=C.id,v["quick_reply_response[options][selected_id]"]=C.selected_id);const A=Object(h.a)([X(f),{type:c.c.REQUEST},{type:y},f&&Object(m.b)(f,S,_)]);return t(A),s.DirectMessages.sendMessage(v).then(n=>{const{entries:s,users:a,tweets:r,cards:o}=n.entities,{conversations:d}=n.result;Object(b.a)(D)&&t(z(f,D));const l=Object(h.a)([{type:c.c.SUCCESS},...Object(i.b)({conversations:d,entries:s,users:a,tweets:r,cards:o}),{type:I},f&&Object(m.j)(f,S,e),x(f)]);return t(l),Promise.resolve(Object.values(n.entities.entries)[0].conversation_id)},n=>{const s=O({attachment:d,conversation_id:f,error:!0,id:S,localMediaId:D,recipient_ids:w,sender_id:p,text:e.text}),a=Object(h.a)([{type:c.c.SUCCESS},{type:g},f&&Object(m.b)(f,S,s)]);return t(a),Object(o.e)(t,n,"ACTION_SEND_DM")})},e=>(t($(f)),e.type="metadata",Promise.reject(e)))},e=>(t(Object(h.a)([Object(b.a)(D)&&z(f,D),$(f)])),Promise.reject(e)))},A=(e,t)=>e.multiDraftDMs[t],S=(e,t)=>{const n=A(e,t);return n?n.text:null},T=E("SAVE_TEXT"),C=(e,t)=>({type:T,conversationId:e,text:t}),j=E("REMOVE_TEXT"),x=e=>({type:j,conversationId:e}),R=(e,t)=>{const n=A(e,t);return n?n.cardUrl:null},D=E("SAVE_CARD_URL"),N=(e,t)=>({type:D,conversationId:e,cardUrl:t}),M=(e,t)=>{const n=A(e,t);return n?n.mediaId:null},P=(e,t)=>{const n=r.g(e,M(e,t));return n.length>0?n[0]:null},w=(e,t)=>{const n=A(e,t);return!!n&&n.isUploading},U=(e,t)=>r.h(e,M(e,t)),L=(e,t)=>{const n=A(e,t);return n?n.gifMetadata:null},B=(e,t)=>{const n=A(e,t);return n?n.mediaMetadata:void 0},k=E("ADD_MEDIA"),F=(e,[t],n,s)=>({payload:{isUploading:!1,mediaId:t,gifMetadata:n,mediaMetadata:s},type:k,conversationId:e}),V=E("UPDATE_MEDIA_METADATA"),G=(e,t)=>({payload:t,type:V,conversationId:e}),K=E("CANCEL_UPLOAD"),q=e=>({type:K,conversationId:e}),H=E("REMOVE_MEDIA"),W=e=>({type:H,conversationId:e}),z=(e,t)=>n=>{n(r.e(t)),n([q(e),W(e)])},Q=E("UPLOAD_REQUEST"),Y=e=>({type:Q,conversationId:e}),J=E("UPLOAD_SUCCESS"),X=e=>({type:J,conversationId:e}),Z=E("UPLOAD_FAILURE"),$=e=>({type:Z,conversationId:e});u.a.register({multiDraftDMs:function(e=f,t){const n=t.conversationId||"new_group";switch(t.type){case V:case k:{const s=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,{[n]:Object.assign({},s,t.payload)})}case Q:{const t=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,{[n]:Object.assign({},t,{isUploading:!0})})}case K:{const t=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,{[n]:Object.assign({},t,{isUploading:!1})})}case Z:case J:case H:{const t=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,{[n]:Object.assign({},t,{isUploading:!1,mediaId:null,mediaMetadata:void 0,gifMetadata:void 0})})}case T:{const s=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,{[n]:Object.assign({},s,{text:t.text})})}case D:{const s=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,{[n]:Object.assign({},s,{cardUrl:t.cardUrl})})}case j:{const t=e[n]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaMetadata:void 0,mediaId:null,text:null};return Object.assign({},e,{[n]:Object.assign({},t,{text:null})})}default:return e}}})},WVrH:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var s=n("AQ79");const a=Object(s.c)("RESET"),r=()=>({type:a})},aWyx:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return i}));const s=Object.freeze({ONE_TO_ONE:"ONE_TO_ONE",GROUP:"GROUP_DM"}),a=Object.freeze({AT_END:"AT_END",HAS_MORE:"HAS_MORE"}),r=Object.freeze({CONVERSATION_AVATAR_UPDATE:"conversation_avatar_update",CONVERSATION_NAME_UPDATE:"conversation_name_update",CONVERSATION_PROFILE_INFO_HEADER:"conversation_profile_info_header",CONVERSATION_READ:"conversation_read",DISABLE_NOTIFICATIONS:"disable_notifications",ENABLE_NOTIFICATIONS:"enable_notifications",JOIN_CONVERSATION:"join_conversation",MARK_ALL_AS_READ:"mark_all_as_read",MENTION_NOTIFICATIONS_UPDATE:"mention_notifications_setting_update",MESSAGE:"message",MESSAGE_DELETE:"message_delete",MESSAGE_MARK_AS_NOT_SPAM:"message_unmark_as_spam",MESSAGE_MARK_AS_SPAM:"message_mark_as_spam",PARTICIPANTS_JOIN:"participants_join",PARTICIPANTS_LEAVE:"participants_leave",REACTION_CREATE:"reaction_create",REACTION_DELETE:"reaction_delete",READ_ONLY_INDICATOR:"read_only_indicator",REMOVE_CONVERSATION:"remove_conversation",TRUST_CONVERSATION:"trust_conversation",TYPING_INDICATOR:"typing_indicator",WELCOME_MESSAGE:"welcome_message_create"}),i=Object.freeze({MUTUAL_FRIENDS:"mutual_friends"})},cIoY:function(e,t,n){"use strict";var s=n("ERkP"),a=n("1YZw"),r=n("rxPX"),i=Object(r.a)().propsFromActions(()=>({addToast:a.b})),o=n("KEM+"),c=n.n(o),d=(n("jQ/y"),n("kYxP"),n("k/Ka")),l=n("3XMw"),u=n.n(l),p=n("sgih"),_=n("t62R"),m=n("/yvb"),h=n("rHpw");const b=u.a.cfd2f35d;class E extends s.Component{constructor(...e){super(...e),c()(this,"_handleOnFocus",e=>{e.currentTarget.select()})}render(){const{cancelButtonLabel:e,description:t,headerText:n,link:a,onCancel:r}=this.props,i=Object(d.a)("input",{autoFocus:!0,onFocus:this._handleOnFocus,readOnly:!0,style:f.linkInput,value:a});return s.createElement(p.a,{onMaskClick:r,style:f.container,type:"center",withMask:!0},n&&s.createElement(_.c,{align:"center",color:"normal",style:f.headerText,weight:"bold"},n),t&&s.createElement(_.c,{align:"center",color:"deepGray",style:f.labelText},t),i,s.createElement(m.a,{onPress:r,size:"normalLarge",style:f.cancelButton,type:"text"},e))}}c()(E,"defaultProps",{cancelButtonLabel:b});const f=h.a.create(e=>({container:{alignItems:"center",paddingVertical:e.spaces.large,paddingHorizontal:e.spaces.xSmall,position:"relative"},headerText:{marginBottom:e.spaces.small},labelText:{marginBottom:e.spaces.small,width:"100%"},linkInput:{backgroundColor:e.colors.faintGray,borderColor:"transparent",color:e.colors.deepGray,fontSize:e.fontSizes.normal,marginBottom:e.spaces.xSmall,paddingVertical:e.spaces.xSmall,paddingHorizontal:e.spaces.medium},cancelButton:{width:"100%"}}));var O=E,y=n("I/9y"),I=n("mjJ+"),g=n("cm6r"),v=n("CaKu"),A=n("U+bB");const S=u.a.e05c00b4,T=u.a.eabf2209,C=u.a.a613e72f,j=u.a.f88553c8,x={riffsy:"https://abs.twimg.com/a/1501527574/img/t1/icon_riffsy.png",giphy:"https://abs.twimg.com/a/1501527574/img/t1/icon_giphy.png"};class R extends s.PureComponent{constructor(e){super(e),c()(this,"_renderMenu",e=>s.createElement(I.a,{items:[{text:C,Icon:y.a,onClick:this._handleCopyGifLinkButtonClick}],onCloseRequested:e})),c()(this,"_handleCopyGifLinkButtonClick",e=>{const{addToast:t,gifUrl:n}=this.props;v.a.isAvailable()?(v.a.setString(n),t({text:j})):this.setState({showCopyLinkSheet:!0}),e&&e()}),c()(this,"_handleCopyLinkSheetCancel",()=>{this.setState({showCopyLinkSheet:!1})}),this.state={showCopyLinkSheet:!1}}render(){const{showCopyLinkSheet:e}=this.state,{provider:t,gifUrl:n}=this.props,{display_name:a,name:r}=t,i=x[r];return i?s.createElement(s.Fragment,null,e?s.createElement(O,{description:T({providerName:a}),headerText:S,link:n,onCancel:this._handleCopyLinkSheetCancel}):null,s.createElement(_.c,{align:"center",color:"deepGray",style:D.root},s.createElement(u.a.I18NFormatMessage,{$i18n:"e2e6ea0d"},this._renderAttribution(a,i)))):null}_renderAttribution(e,t){return s.createElement(g.a,{interactiveStyles:null,renderMenu:this._renderMenu},s.createElement(_.c,{weight:"bold",withInteractiveStyling:!0},s.createElement(A.a,{source:{uri:t},style:D.image}),s.createElement(_.c,{color:"normal"},e.toUpperCase())))}}const D=h.a.create(e=>({button:{marginLeft:e.spaces.xSmall},image:{display:"inline-block",height:e.spaces.small,marginHorizontal:e.spaces.xxSmall,width:e.spaces.small},root:{marginHorizontal:e.spaces.xSmall}}));var N=R;const M=i(({addToast:e,provider:t,gifUrl:n})=>s.createElement(N,{addToast:e,gifUrl:n,provider:t}));t.a=M},gpVt:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return x}));var s=n("KEM+"),a=n.n(s),r=n("ERkP"),i=(n("kYxP"),n("ge3j")),o=n("VnFT"),c=n("vjRr"),d=n("rxPX"),l=n("0KEI");const u=(e,t)=>{const{urls:n}=t;let s;for(const t of n)if(s=c.a.select(e,t),s)break;return s};var p=Object(d.a)().propsFromState(()=>({card:u})).propsFromActions(()=>({createLocalApiErrorHandler:Object(l.d)("COMPOSER_CARD_PREVIEW"),fetchCardPreviewIfNeeded:c.a.fetchCardPreviewIfNeeded,updateDMComposer:o.e,updateTweetComposer:i.w})),_=n("KqB4"),m=n.n(_),h=n("NnR4"),b=n("3XMw"),E=n.n(b),f=n("hOZg"),O=n("v6aA"),y=n("cnVF"),I=n("MWbm"),g=n("/yvb"),v=n("rHpw"),A=n("VY6S"),S=n("mN6z");const T=E.a.f6fec9f6,C=/^https?:\/\//i,j=e=>{const t=m()(e);if(t.length)return t.map(e=>!C.test(e)&&"http://"+e||e)},x=e=>e===y.v;class R extends r.Component{constructor(e,t){super(e,t),a()(this,"_fetchCardPreviewIfNeeded",()=>{const{fetchCardPreviewIfNeeded:e,urls:t,createLocalApiErrorHandler:n}=this.props;t.forEach(t=>{e(t).catch(n())})}),a()(this,"_handleCardPreviewDismissal",e=>this._updateSingleComposer({cardUrl:y.v})),a()(this,"_updateSingleComposer",e=>{const{conversationId:t,index:n,updateDMComposer:s,updateTweetComposer:a}=this.props,{cardUrl:r}=e||{};this._isDMComposer?t&&s(t,r):a({updates:{cardUrl:r},index:n})}),this._debouncedFetchCardPreview=Object(A.a)(this._fetchCardPreviewIfNeeded,1e3),this._isDMComposer=!!e.conversationId}componentDidMount(){this._debouncedFetchCardPreview()}componentDidUpdate(e){var t;const{card:n,urls:s}=this.props;Object(S.a)(e.urls,s)||this._debouncedFetchCardPreview(),(null==(t=e.card)?void 0:t.url)===(null==n?void 0:n.url)||this._isDMComposer||this._updateSingleComposer({cardUrl:null==n?void 0:n.url})}componentWillUnmount(){this._updateSingleComposer()}render(){const{card:e,isCardPreviewTombstoned:t,style:n}=this.props,{loggedInUserId:s}=this.context;return e&&!t?r.createElement(I.a,{style:n},r.createElement(h.a,{card:{name:e.name,url:e.url,binding_values:e.hw_card_binding_values},cardContext:{tweetUserId:s},isInteractive:!1}),r.createElement(g.a,{accessibilityLabel:T,icon:r.createElement(f.a,null),onPress:this._handleCardPreviewDismissal,size:"small",style:D.closeButton,type:"onMedia"})):null}}a()(R,"contextType",O.a);const D=v.a.create(e=>({closeButton:{position:"absolute",top:e.spaces.xxSmall,left:e.spaces.xxSmall}})),N=p(R);t.a=N},jtO7:function(e,t,n){"use strict";var s=n("97Jx"),a=n.n(s),r=n("LdEA"),i=n.n(r),o=n("ERkP"),c=n("t62R"),d=n("I4+6"),l=n("cm6r"),u=n("rHpw"),p=n("MWbm");const _=u.a.create(e=>({container:{backgroundColor:e.colors.cellBackground},root:{justifyContent:"center",minHeight:e.spaces.xxLarge,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.small},bottomBorder:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:1}}));t.a=e=>{let{align:t="center",color:n,label:s,withBottomBorder:r=!0}=e,m=i()(e,["align","color","label","withBottomBorder"]);const h=d.a.generate({backgroundColor:u.a.theme.colors.transparent,color:u.a.theme.colors[n],insetFocusRing:!0}),b=[_.root,r&&_.bottomBorder];return o.createElement(p.a,{style:_.container},o.createElement(l.a,a()({},m,{interactiveStyles:h,style:b}),o.createElement(c.c,{align:t,color:n},s)))}},kIAd:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var s=n("0vv5");const a=500,r={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:n.n(s).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},krmn:function(e,t,n){"use strict";n("kYxP");var s=n("ERkP"),a=(n("JtPf"),n("zb92")),r=n("RuTB"),i=n("3XMw"),o=n.n(i),c=Object(a.a)({loader:()=>o.a.emoji.then(()=>Promise.all([n.e(15),n.e(14),n.e(159)]).then(n.bind(null,"5RdJ"))),renderPlaceholder:(e,t)=>s.createElement(r.a,{hasError:e,onRetry:t})}),d=n("rrSi"),l=n.n(d),u=n("LfYE"),p=n.n(u),_=n("rHpw"),m=n("U+bB"),h=n("kLqS"),b=n("MWbm");const E=_.a.create(e=>({content:{backgroundColor:e.colors.cellBackground},dimensions:{height:"400px",borderRadius:e.borderRadii.large,minWidth:`calc(${e.spaces.large} * 9 + 2 * ${e.spaces.xSmall})`},hidden:{display:"none"}}));var f=e=>{const{partialRender:t,onSelect:n}=e,a=h.a.get()>1?p.a:l.a;return s.createElement(s.Fragment,null,s.createElement(b.a,{style:[E.content,E.dimensions]},s.createElement(c,{onSelect:n,partialRender:t,rowSize:9,spriteUrl:a})),s.createElement(m.a,{source:a,style:E.hidden}))},O=n("pNJr"),y=n("2ZFc"),I=n("OiMc"),g=n("/yvb");const v=o.a.d4a4842d,A=s.createElement(O.a,null),S=e=>{const{disabled:t,onEmojiSelect:n,onPress:a,size:r,style:i,textInputRef:o}=e,[d,l]=s.useState(!0);s.useEffect(()=>{setTimeout(()=>{c.preload(),y.a.get("emojiPicker2")},5e3)},[]);return s.createElement(I.a,{enableEnterKeyToggle:!0,onAnimateComplete:()=>l(!1),onDismiss:()=>l(!0),onHoverCardUnmount:()=>{window.requestAnimationFrame(()=>o&&o.focus())},renderContent:()=>s.createElement(f,{onSelect:n,partialRender:d}),withArrow:!0},s.createElement(g.a,{accessibilityLabel:v,"aria-haspopup":"true",disabled:t,icon:A,onPress:e=>a&&a(e),size:r,style:i,type:"text"}))};S.defaultProps={disabled:!1,size:"small"};t.a=S},lRnM:function(e,t,n){"use strict";n.d(t,"f",(function(){return B})),n.d(t,"t",(function(){return F})),n.d(t,"x",(function(){return V})),n.d(t,"y",(function(){return G})),n.d(t,"B",(function(){return q})),n.d(t,"A",(function(){return H})),n.d(t,"z",(function(){return W})),n.d(t,"u",(function(){return z})),n.d(t,"v",(function(){return Q})),n.d(t,"w",(function(){return Y})),n.d(t,"d",(function(){return J})),n.d(t,"k",(function(){return X})),n.d(t,"l",(function(){return Z})),n.d(t,"n",(function(){return $})),n.d(t,"m",(function(){return ee})),n.d(t,"a",(function(){return te})),n.d(t,"o",(function(){return ne})),n.d(t,"c",(function(){return ae})),n.d(t,"p",(function(){return ie})),n.d(t,"q",(function(){return oe})),n.d(t,"I",(function(){return ce})),n.d(t,"s",(function(){return le})),n.d(t,"D",(function(){return pe})),n.d(t,"h",(function(){return _e})),n.d(t,"j",(function(){return me})),n.d(t,"g",(function(){return he})),n.d(t,"i",(function(){return be})),n.d(t,"J",(function(){return Ee})),n.d(t,"G",(function(){return fe})),n.d(t,"H",(function(){return Oe})),n.d(t,"F",(function(){return Ie})),n.d(t,"b",(function(){return ve})),n.d(t,"r",(function(){return Se})),n.d(t,"E",(function(){return Ce})),n.d(t,"C",(function(){return je})),n.d(t,"e",(function(){return xe}));n("jQ/y"),n("IAdD"),n("JtPf"),n("kYxP");var s=n("LdEA"),a=n.n(s),r=n("oEOe"),i=n("AspN"),o=n("RqPI"),c=n("AQ79"),d=n("/kEJ"),l=n("xPna"),u=n("pXBW"),p=n("hqKg"),_=n("k49u"),m=n("/NU0"),h=n("aWyx"),b=n("WVrH"),E=n("uKEd"),f=n("k6jb"),O=n("kGix"),y=n("t0aI");function I(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const g=r.a(c.b,"ACCEPT_CONVERSATION"),v=r.a(c.b,"ADD_PARTICIPANTS"),A=r.a(c.b,"FETCH_CONVERSATION"),S=r.a(c.b,"FETCH_CONVERSATION_FROM_PARTICIPANTS"),T=r.a(c.b,"LEAVE_CONVERSATION"),C=r.a(c.b,"MARK_CONVERSATION_READ"),j=r.a(c.b,"DISABLE_MENTION_CONVERSATION_NOTIFICATIONS"),x=r.a(c.b,"DISABLE_CONVERSATION_NOTIFICATIONS"),R=r.a(c.b,"ENABLE_MENTION_CONVERSATION_NOTIFICATIONS"),D=r.a(c.b,"ENABLE_CONVERSATION_NOTIFICATIONS"),N=r.a(c.b,"UPDATE_CONVERSATION_NAME"),M=r.a(c.b,"UPLOAD_MEDIA"),P=r.a(c.b,"UPDATE_GROUP_AVATAR"),w=e=>(new Date).getTime()+36e5*e,U=[void 0,w(1),w(8),w(168)],L={};function B(e=L,t){switch(t.type){case g.SUCCESS:{const{conversationId:n}=t.meta,s=e[n];return Object.assign({},e,{[n]:Object.assign({},s,{data:Object.assign({},s.data,{trusted:!0})})})}case se:{const n=Object.entries(t.payload||{}).reduce((t,[n,s])=>(t[n]=Object.assign({},k(e[n],s),{fetchStatus:{[f.a]:O.a.LOADED,[f.b]:O.a.LOADED}}),t),{});return Object.assign({},e,n)}case v.REQUEST:{const n=t.meta.conversationId,s=e[n];return Object.assign({},e,{[n]:Object.assign({},s,{fetchStatus:Object.assign({},s.fetchStatus,{[f.b]:O.a.LOADING})})})}case v.FAILURE:{const n=t.meta.conversationId,s=e[n];return Object.assign({},e,{[n]:Object.assign({},s,{fetchStatus:Object.assign({},s.fetchStatus,{[f.b]:O.a.FAILED})})})}case v.SUCCESS:{const n=t.meta.conversationId,s=e[n],a=s.data.participants,r=t.payload.entities.entries?Object.values(t.payload.entities.entries)[0].participants:[];return Object.assign({},e,{[n]:Object.assign({},s,{fetchStatus:Object.assign({},s.fetchStatus,{[f.b]:O.a.LOADED}),data:Object.assign({},s.data,{participants:[...a,...r]})})})}case A.REQUEST:{const{conversationId:n,direction:s=f.a}=t.meta,a=e[n];return Object.assign({},e,{[n]:Object.assign({},a,{fetchStatus:Object.assign({},a&&a.fetchStatus||{},{[s]:O.a.LOADING})})})}case A.FAILURE:{const{conversationId:n,direction:s=f.a}=t.meta,a=e[n];return Object.assign({},e,{[n]:Object.assign({},a,{fetchStatus:Object.assign({},a&&a.fetchStatus||{},{[s]:O.a.FAILED}),error:t.payload})})}case A.SUCCESS:{const{conversationId:n,direction:s=f.a}=t.meta;return Object.assign({},e,{[n]:Object.assign({},e[n],{fetchStatus:Object.assign({},e[n]&&e[n].fetchStatus||{},{[s]:O.a.LOADED})})})}case re:return Object.entries(e).reduce((n,[s,a])=>(n[s]=k(e[s],{last_read_event_id:t.payload}),n),{});case C.REQUEST:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{last_read_event_id:t.meta.lastReadEventId})});case de:{const n=t.payload;return a()(e,[n].map(I))}case T.REQUEST:return Object.assign({},e,{[t.meta.conversationId]:Object.assign({},e[t.meta.conversationId],{isDeleted:!0})});case ue:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{notifications_disabled:!t.payload})});case x.REQUEST:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{notifications_disabled:!0,mute_expiration_time:U[t.meta.duration]})});case j.REQUEST:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{mention_notifications_disabled:!0})});case D.REQUEST:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{notifications_disabled:!1})});case R.REQUEST:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{mention_notifications_disabled:!1})});case Te:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{avatar_image_https:t.payload})});case N.REQUEST:case N.SUCCESS:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{name:t.meta.name})});case ye:{const n=e[t.meta.conversationId],s=n&&n.data&&n.data.max_entry_id||"0";return Object(y.b)(t.payload,s)?Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{max_entry_id:t.payload})}):e}case M.REQUEST:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{isUploading:!0})});case M.FAILURE:case M.SUCCESS:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{isUploading:!1})});case ge:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{avatarMediaId:t.payload})});case Ae:return Object.assign({},e,{[t.meta.conversationId]:k(e[t.meta.conversationId],{avatarMediaId:null})});case b.a:return L;default:return e}}const k=(e={},t={},n=[])=>{const s=a()(e,["error"]),{avatarMediaId:r=null}=Object(m.a)(t.avatarMediaId)?t:s,{isUploading:i=!1}=t,{max_entry_id:o}=t,c=a()(t,["avatarMediaId","isUploading","max_entry_id"]),d=Object.assign({},s&&s.data,c);var l,u;return o&&(d.max_entry_id=(l=o,u=s&&s.data&&s.data.max_entry_id,Object(y.c)(l,u)?l:u)),Object.assign({},s,{avatarMediaId:r,data:d,isUploading:i})},F=(e,t)=>e[c.a].conversations[t],V=(e,t)=>{const n=F(e,t);return n?Object(O.b)(n.fetchStatus,n.data):O.a.LOADED},G=(e,t)=>{const n=F(e,t);return!!n&&Object(O.b)(n.fetchStatus,n.data)===O.a.LOADED},K=(e,t)=>{const n=F(e,t);return!!n&&n.fetchStatus[f.a]===O.a.LOADING},q=Object(p.createSelector)(e=>e[c.a].conversations,e=>Object.entries(e).reduce((e,[t,n])=>(n.data&&(e[t]=n),e),{})),H=(e,t)=>{const{data:n}=F(e,t)||{},{sort_event_id:s}=n||{};if(s){const t=o.g(e),{message_data:n,by_user_id:a,id:r,sender_id:i}=Object(E.n)(e,s)||{};if(i&&i!==t||n&&n.sender_id!==t||a&&a!==t)return r}return null},W=(e,t)=>{const n=H(e,t),{data:s}=F(e,t)||{};return!n||!!(s&&s.last_read_event_id&&Object(y.c)(s.last_read_event_id,n))},z=(e,t)=>{const{avatarMediaId:n}=F(e,t)||{};return n},Q=(e,t)=>{const{isUploading:n}=F(e,t)||{};return n},Y=(e,t)=>i.h(e,z(e,t)),J=(e,t)=>(n,s,{api:a})=>{const i=t.join(",");return r.b(n,{params:{conversationId:e,joinedParticipantIds:i},request:a.DirectMessages.addParticipants})({actionTypes:v,context:"ACTION_DM_ADD_PARTICIPANTS",meta:{conversationId:e,participantIds:t}},e=>{if(e){const{entities:t}=e;return[t.entries&&Object(E.a)(t.entries),Object(d.c)(t)]}}).then(e=>{const t=e.result.failed_participants;if(!t)return Promise.resolve(e);const n=Object.keys(t),s=1===n.length?t[n[0]]:_.a.DefaultApiError,a=new u.a("addParticpants URL",500,e.headers,[{code:s}]);return a.context.action="ACTION_DM_ADD_PARTICIPANTS",Promise.reject(a)})},X=(e={})=>(t,n,{api:s})=>{const{conversationId:a,context:i}=e;return r.b(t,{params:e,request:s.DirectMessages.fetchConversation})({actionTypes:A,context:i,meta:{conversationId:a,direction:Object(f.c)(e)}},e=>{if(e){const{cards:t,entries:n,tweets:s,users:a}=e.entities,{conversations:r,max_entry_id:i,min_entry_id:o,status:c}=e.result.conversation_timeline,d=((e={},t)=>Object.entries(e).reduce((e,[n,s])=>Object.assign({},e,{[n]:Object.assign({},s,t)}),{}))(r,{max_entry_id:i,min_entry_id:o,status:c});return Object(l.b)({conversations:d,entries:n,users:a,tweets:s,cards:t})}})},Z=e=>(t,n,{api:s})=>r.b(t,{params:{participantIds:e},request:s.DirectMessages.fetchConversationFromParticipants})({actionTypes:S,meta:{participantIds:e}}),$=(e={})=>(t,n)=>{const s=n(),{conversationId:a}=e,{data:r={}}=F(s,a)||{},i=K(s,a);return(!r.status||r.status===h.c.HAS_MORE)&&!i?t(X({conversationId:a,context:"FETCH_DM_CONVERSATION"})):Promise.resolve()},ee=(e={})=>(t,n)=>{const s=n(),{conversationId:a}=e,{data:r}=F(s,a)||{},{status:i,min_entry_id:o}=r||{},c=K(s,a);return i!==h.c.HAS_MORE||c?Promise.resolve():t(X(Object.assign({},e,{max_id:o,context:"FETCH_DM_CONVERSATION_HISTORY"})))},te=e=>(t,n,{api:s})=>r.b(t,{params:{conversationId:e},request:s.DirectMessages.acceptConversation})({actionTypes:g,meta:{conversationId:e}}),ne=(e={})=>(t,n,{api:s})=>{const{conversationId:a}=e;return r.c(t,{params:e,request:s.DirectMessages.leaveConversation})({actionTypes:T,context:"ACTION_LEAVE_CONVERSATION",meta:{conversationId:a}})},se=c.c("ADD_CONVERSATIONS"),ae=e=>({payload:e,type:se}),re=c.c("MARK_ALL_AS_READ"),ie=e=>({payload:e,type:re}),oe=(e,t)=>({type:C.REQUEST,meta:{conversationId:e,lastReadEventId:t}}),ce=e=>(t,n,{api:s})=>{const a=n(),{data:i={}}=F(a,e)||{},{sort_event_id:o}=i,c=!W(a,e);if(e&&o&&c){return r.c(t,{params:{conversationId:e,last_read_event_id:o},request:s.DirectMessages.markRead})({actionTypes:C,bypassFailureOnErrors:()=>!0,context:"APP_DM_UPDATE_CONVERSATION_READ_STATE",meta:{conversationId:e,lastReadEventId:o}})}return Promise.resolve()},de=c.c("REMOVE_CONVERSATION"),le=e=>[{payload:e,type:de},Object(E.i)(e)],ue=c.c("TOGGLE_CONVERSATION_NOTIFICATIONS"),pe=(e,t)=>({meta:{conversationId:e},payload:t,type:ue}),_e=(e={})=>(t,n,{api:s})=>{const{conversationId:a,duration:i}=e;return r.c(t,{params:e,request:s.DirectMessages.disableNotifications})({actionTypes:x,context:"ACTION_DISABLE_NOTIFICATIONS",meta:{conversationId:a,duration:i}})},me=(e={})=>(t,n,{api:s})=>{const{conversationId:a}=e;return r.c(t,{params:e,request:s.DirectMessages.enableNotifications})({actionTypes:D,context:"ACTION_ENABLE_NOTIFICATIONS",meta:{conversationId:a}})},he=(e={})=>(t,n,{api:s})=>{const{conversationId:a}=e,i=Object.assign({mention_notifications_disabled:!0},e);return r.c(t,{params:i,request:s.DirectMessages.updateMentionNotificationsSetting})({actionTypes:j,context:"ACTION_DISABLE_DM_MENTION_NOTIFICATIONS",meta:{conversationId:a}})},be=(e={})=>(t,n,{api:s})=>{const{conversationId:a}=e,i=Object.assign({mention_notifications_disabled:!1},e);return r.c(t,{params:i,request:s.DirectMessages.updateMentionNotificationsSetting})({actionTypes:R,context:"ACTION_ENABLE_DM_MENTION_NOTIFICATIONS",meta:{conversationId:a}})},Ee=(e={})=>(t,n,{api:s})=>s.DirectMessages.updateTyping(e),fe=(e={})=>(t,n,{api:s})=>{const{conversationId:a,name:i}=e;return r.c(t,{params:e,request:s.DirectMessages.updateConversationName})({actionTypes:N,context:"ACTION_UPDATE_CONVERSATION_NAME",meta:{conversationId:a,name:i}})},Oe=e=>({type:N.SUCCESS,meta:{conversationId:e.conversation_id,name:e.conversation_name}}),ye=c.c("UPDATE_CONVERSATION_MAX_ENTRY_ID"),Ie=(e,t)=>({meta:{conversationId:e},payload:t,type:ye}),ge=c.c("ADD_AVATAR_MEDIA"),ve=(e,t)=>({meta:{conversationId:e},payload:t,type:ge}),Ae=c.c("REMOVE_AVATAR_MEDIA"),Se=(e,t)=>({meta:{conversationId:e},payload:t,type:Ae}),Te=c.c("UPDATE_CONVERSATION_AVATAR"),Ce=(e,t)=>({meta:{conversationId:e},payload:t,type:Te}),je=e=>(t,n,{api:s})=>{t({meta:{conversationId:e},type:M.REQUEST});const a=z(n(),e),o=i.k(a);return t(o).then(([n])=>{t({meta:{conversationId:e},type:M.SUCCESS});return r.b(t,{params:{conversationId:e,avatar_id:n.uploadId},request:s.DirectMessages.updateConversationAvatar})({actionTypes:P,context:"APP_DM_UPDATE_CONVERSATION_AVATAR"})},n=>{const s={errors:n,context:"APP_DM_UPDATE_CONVERSATION_AVATAR"};return t({meta:{conversationId:e},type:M.FAILURE}),Promise.reject(s)})},xe=(e,t)=>(n,s,{api:a})=>r.d(n,{params:{conversation_id:e,welcome_message_id:t},request:a.DirectMessages.addWelcomeMessageToConversation})("ADD_WELCOME_MESSAGE_TO_CONVERSATION")},oEoC:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return c}));n("IAdD"),n("WNMA"),n("LJOr"),n("tVqn"),n("kYxP");var s=n("kIAd");function a(e,t){let n;const a=s.b.scoper.find(s=>{if(-1!==s.srcInputs.indexOf(t))return n=e.match(s.regexp),n});let r="";return n&&(r=n&&(1===n.length?n[0]:n[1])),a?Object.assign({},a.scope,{src:t,q:r}):null}function r(e,t){const n=t.slice(0,e),a=t.slice(e,t.length),r=n.search(s.b.WordEnd),i=(r>=0?n.slice(r):"")+a.slice(0,a.search(s.b.WordBoundary));return i.trim()?{start:r,word:i}:{start:-1,word:""}}function i(){return"typeaheadFocus-"+Math.random()}function o(e){const{altKey:t,ctrlKey:n,metaKey:s}=e;return!(t||n||s)}function c(e,t){const n=[];e.forEach(e=>{const s=t.find(t=>t.id===e.id);s&&s.data&&s.data.result_context?n.push(s):n.push(e)});const s=n.map(e=>e.id),a=t.filter(e=>s.indexOf(e.id)<0);return[...n,...a]}},pKoL:function(e,t,n){"use strict";n("kYxP");var s=n("KEM+"),a=n.n(s),r=n("ERkP"),i=n("HPNB"),o=n("9HgX"),c=n("3XMw"),d=n.n(c),l=n("mN6z"),u=(n("AxOO"),n("Qwev")),p=n("rHpw"),_=(n("aWzz"),n("1auM")),m=n("ude7"),h=n("U+bB"),b=n("MWbm");const E=d.a.gff1f69e;class f extends r.Component{constructor(...e){super(...e),a()(this,"state",{imagePreviewUrl:null}),a()(this,"_getImageSrc",()=>{const{mediaItem:e,enableGif:t}=this.props,{imagePreviewUrl:n}=this.state;if(e&&e.mediaFile)return e.mediaFile.isGif&&!t?n:e.mediaFile.url})}componentDidUpdate(){const{enableGif:e,mediaItem:{mediaFile:t}}=this.props,{imagePreviewUrl:n}=this.state;e||n||t instanceof _.a&&t.isGif&&Object(m.a)(t).then(e=>{this.setState({imagePreviewUrl:e})})}shouldComponentUpdate(e,t){return!Object(l.a)(e,this.props)||!Object(l.a)(t,this.state)}render(){const{borderRadius:e,enableGif:t,mediaItem:n,onClick:s}=this.props,{imagePreviewUrl:a}=this.state||{},i=n.mediaFile&&n.mediaFile.isGif&&!t&&!a,o=n.needsProcessing||i,c=[y.root,O[e],o&&y.loadingBorder],d=this._getImageSrc();return r.createElement(b.a,{onClick:s,style:c},o||!d?r.createElement(u.a,{accessibilityLabel:E,style:y.activityIndicator}):r.createElement(h.a,{resizeMode:"cover",source:d,style:y.image}))}}a()(f,"defaultProps",{borderRadius:"none",enableGif:!0});const O=p.a.create(e=>({infinite:{borderRadius:e.borderRadii.infinite},medium:{borderRadius:e.borderRadii.medium},none:{borderRadius:0}})),y=p.a.create(e=>({root:{borderRadius:e.borderRadii.large,borderStyle:"solid",borderWidth:0,borderColor:"transparent",maxWidth:"100%",height:"100%",overflow:"hidden"},image:{display:"block",height:"100%",width:"100%"},loadingBorder:{borderColor:e.colors.mediumGray},activityIndicator:{height:"100%"}}));var I=f,g=(n("IAdD"),n("LdEA")),v=n.n(g),A=n("k/Ka"),S=n("eXeu"),T=n("iOGT");class C extends r.Component{constructor(...e){super(...e),a()(this,"_setVideoRef",e=>{const{getVideoRef:t}=this.props;t&&t(e)})}render(){const e=this.props,{children:t,dataSaverMode:n,style:s,variants:a}=e,i=v()(e,["children","dataSaverMode","getVideoRef","style","variants"]),o=Object(T.c)(a,n?T.a.MEDIUM:T.a.HIGH)||[],c=Object(S.e)(o.map(e=>({src:e.url,type:e.content_type})));return Object(A.a)("video",Object.assign({},i,{children:[c.map(e=>r.createElement("source",{key:e.src,src:e.src,type:e.type})),t],ref:this._setVideoRef,style:s}))}}a()(C,"defaultProps",{dataSaverMode:!1,variants:[]});var j=n("sjK1"),x=n("cHvH"),R=n("mXq/"),D=n("/yvb"),N=n("a6qo"),M=n("hOZg"),P=n("Lsrn");const w=(e={})=>Object(A.a)("svg",Object.assign({},e,{style:[P.a.root,e.style],viewBox:"0 0 24 24"}),r.createElement("g",null,r.createElement("path",{d:"M21.592 5.576c.877-.967.882-2.298.006-3.174-.877-.877-2.208-.87-3.174.006 0 0-.003 0-.004.002l-.006.006-.005.004s-.002 0-.002.002L8.398 11.27c-1.716-.214-3.424.31-4.534 1.42-3.872 3.874-1.523 9.616-1.422 9.858.1.24.32.41.577.45.037.007.075.01.113.01.218 0 .428-.095.57-.265 1.83-2.15 3.043-2.023 4.328-1.89 1.164.122 2.477.258 3.834-1.282.975-1.106 1.302-2.585.922-4.03l8.792-9.948h.002l.004-.006.006-.006.002-.004zm-1.055-2.113c.305.305.28.74-.06 1.11-.003.003-.004.007-.006.01 0 0-.003 0-.004.003l-5.662 6.406-1.796-1.796 6.406-5.662c.002 0 .002-.003.004-.005.002-.003.006-.004.008-.006.37-.34.807-.365 1.11-.06zm-8.62 10.797L9.74 12.084l2.142-1.894 1.927 1.927-1.894 2.143zm-1.178 4.32c-.848.96-1.488.895-2.552.78-1.27-.13-2.808-.293-4.722 1.463-.415-1.673-.784-4.83 1.457-7.072.807-.805 2.086-1.168 3.377-.983l2.977 2.976c.333 1.03.15 2.057-.538 2.836z"})));w.metadata={width:24,height:24};var U=w,L=n("+/sI");const B=d.a.gd80afba,k=d.a.abd845fd,F=d.a.df1b0707,V=d.a.cd959e5b,G=d.a.add55c97;class K extends r.Component{constructor(...e){super(...e),a()(this,"state",{isVideoPaused:!0,playGif:!1}),a()(this,"_handleGifClick",()=>{this.setState({playGif:!this.state.playGif})}),a()(this,"_handleMediaPreviewLayout",e=>{const{mediaItem:t,resizeIfNeeded:n}=this.props,s=t.mediaFile||t.externalMediaDetails;if(!s)return;const{nativeEvent:{layout:{height:a,width:r}}}=e,{height:i,width:o}=s,c=o/i;Math.abs(c-r/a)>.05&&this._mediaContainer&&("width"===n?this._mediaContainer.setNativeProps({style:{width:a*c}}):"height"===n&&this._mediaContainer.setNativeProps({style:{height:r/c}}))}),a()(this,"_handleVideoOnPlay",e=>{this.setState({isVideoPaused:!1})}),a()(this,"_handleVideoOnPause",e=>{this.setState({isVideoPaused:!0})}),a()(this,"_setMediaContainerRef",e=>{this._mediaContainer=e}),a()(this,"_setVideoRef",e=>{this._video=e}),a()(this,"_playVideo",()=>{if(this._video){const e=this._video.play();void 0!==e&&e.then(e=>{this._handleVideoOnPlay()}).catch()}}),a()(this,"_pauseVideo",()=>{this._video&&(this._video.pause(),this._handleVideoOnPause())})}render(){const{accessibilityLabel:e,accessibilityRole:t,enableGif:n,mediaItem:s,onEdit:a,onRemove:c,style:d,withAltTextLabel:l,withCloseButton:u,withEditButton:p}=this.props,{playGif:_}=this.state,m=s.externalMediaDetails&&s.externalMediaDetails.mediaType===o.a,h=m||n&&s.mediaFile&&s.mediaFile.isGif;return r.createElement(x.a,null,({windowWidth:n})=>{const s=i.a.isTwoColumnLayout(n);return r.createElement(b.a,{accessibilityLabel:e||G,accessibilityRole:t,onLayout:this._handleMediaPreviewLayout,ref:this._setMediaContainerRef,style:[d,q.cursor,m&&q.gifPlayButton]},this._renderPreview(),m&&!_&&r.createElement(R.a,{accessibilityLabel:F,onPress:this._handleGifClick,size:"small"}),u?r.createElement(D.a,{accessibilityLabel:V,icon:r.createElement(M.a,null),onPress:c,size:"small",style:q.close,type:"onMedia"}):null,h?r.createElement(L.c,{type:L.a}):null,l?r.createElement(N.a,{align:"left",bold:!0},"ALT"):null,p?r.createElement(D.a,{accessibilityLabel:B,icon:s?void 0:r.createElement(U,null),onPress:a,size:s?"normalCompact":"small",style:q.edit,type:"onMedia"},s&&k):null)})}_renderPreview(){const{mediaItem:e}=this.props;if(e.externalMediaDetails){const t=e.externalMediaDetails.previewUrl,n=e.externalMediaDetails.stillMediaUrl;return this._renderGifPreview(t,n)}if(e.mediaFile&&e.mediaFile.isVideo){const t=[{content_type:e.mediaFile.type,url:e.mediaFile.url}];return this._renderVideoPreview(t)}return r.createElement(b.a,{style:p.a.absoluteFill},this._renderImagePreview())}_renderGifPreview(e,t){const{playGif:n}=this.state,s={uri:n?e:t};return r.createElement(b.a,{onClick:this._handleGifClick,style:p.a.absoluteFill},r.createElement(h.a,{resizeMode:"cover",source:s,style:q.video}))}_renderImagePreview(){const{borderRadius:e,enableGif:t,mediaItem:n,onClick:s}=this.props;return r.createElement(I,{borderRadius:e,enableGif:t,mediaItem:n,onClick:s})}_renderVideoPreview(e){const{mediaItem:{mediaFile:t}}=this.props;return r.createElement(C,{autoPlay:!1,controls:!0,getVideoRef:this._setVideoRef,loop:!0,muted:!0,onPause:this._handleVideoOnPause,onPlay:this._handleVideoOnPlay,playsInline:!0,poster:t instanceof j.c?t.thumbnail:"",style:q.video,variants:e})}}a()(K,"defaultProps",{enableGif:!0,withCloseButton:!0,withAltTextLabel:!1,withEditButton:!1});const q=p.a.create(e=>({close:{position:"absolute",left:e.spaces.xxSmall,top:e.spaces.xxSmall},cursor:{cursor:"pointer"},edit:{position:"absolute",right:e.spaces.xxSmall,top:e.spaces.xxSmall},gifPlayButton:{alignItems:"center",justifyContent:"center"},video:{height:"100%",width:"100%"}}));t.a=K},rFBM:function(e,t,n){"use strict";n("kYxP");var s=n("KEM+"),a=n.n(s),r=n("ERkP"),i=n("rHpw"),o=n("k/Ka"),c=n("MWbm");const d=e=>Object(o.a)("div",e);class l extends r.Component{constructor(...e){super(...e),a()(this,"_dragEnterCount",0),a()(this,"state",{active:!1}),a()(this,"_handleDragDrop",e=>{const{onFilesAdded:t}=this.props;e.preventDefault();t(Array.from(e&&e.dataTransfer.files)),this._updateDragCount(0)}),a()(this,"_handleDragEnter",e=>{const{onDragEnter:t}=this.props;e.preventDefault(),t&&t(),this._updateDragCount(this._dragEnterCount+1)}),a()(this,"_handleDragLeave",e=>{e.preventDefault(),this._updateDragCount(this._dragEnterCount-1)}),a()(this,"_handleDragOver",e=>{e.preventDefault()})}render(){const{allowDragDrop:e,children:t,style:n}=this.props,{active:s}=this.state,a=e?u.dragBorderValid:u.dragBorderInvalid;return r.createElement(d,{onDragEnter:this._handleDragEnter,onDragLeave:this._handleDragLeave,onDragOver:this._handleDragOver,onDrop:this._handleDragDrop,style:[u.root,n,s&&a]},r.createElement(c.a,{style:u.inner},"function"==typeof t?t(s):t))}_updateDragCount(e){this._dragEnterCount=e,0===this._dragEnterCount?this.setState({active:!1}):this._dragEnterCount>0&&this.setState({active:!0})}}a()(l,"defaultProps",{allowDragDrop:!0});const u=i.a.create(e=>({root:{display:"flex",flexDirection:"column"},dragBorderValid:{borderStyle:"dashed",borderWidth:e.spaces.micro,borderColor:e.colors.primary},dragBorderInvalid:{borderStyle:"dashed",borderWidth:e.spaces.micro,borderColor:e.colors.red},inner:{flexGrow:1}}));t.a=l},rrSi:function(e,t,n){e.exports=n.p+"twemoji_sprite.6faba595.png"},uKEd:function(e,t,n){"use strict";n.d(t,"e",(function(){return A})),n.d(t,"a",(function(){return j})),n.d(t,"f",(function(){return x})),n.d(t,"d",(function(){return R})),n.d(t,"k",(function(){return D})),n.d(t,"i",(function(){return M})),n.d(t,"r",(function(){return P})),n.d(t,"h",(function(){return w})),n.d(t,"b",(function(){return L})),n.d(t,"j",(function(){return k})),n.d(t,"c",(function(){return V})),n.d(t,"g",(function(){return K})),n.d(t,"l",(function(){return q})),n.d(t,"n",(function(){return H})),n.d(t,"o",(function(){return W})),n.d(t,"m",(function(){return z})),n.d(t,"p",(function(){return Q})),n.d(t,"q",(function(){return Y}));n("IAdD"),n("DZ+c"),n("kYxP");var s=n("LdEA"),a=n.n(s),r=n("t0aI"),i=n("aWyx"),o=n("SrIh"),c=n("WVrH"),d=n("fEA7"),l=n.n(d),u=n("AQ79"),p=n("3A2y"),_=n("J4ZH"),m=n("4FGy"),h=n("s1N3"),b=n("lnti"),E=n("oEOe");const f=Object(E.a)(u.b,"DELETE_MESSAGE"),O=Object(E.a)(u.b,"REACTION_CREATE"),y=Object(E.a)(u.b,"REACTION_DELETE"),I=Object(E.a)(u.b,"MARK_ENTRIES_AS_SPAM"),g=Object(E.a)(u.b,"MARK_ENTRIES_AS_NOT_SPAM"),v={entries:{},entryIdsByConversationId:{},reactionsByMessageId:{}};function A(e=v,t){const{conversationId:n,requestId:s}=t.meta||{};switch(t.type){case U:{const{id:s}=t.payload,a=Object.assign({},e.entries,{[s]:S(e.entries[s],{data:t.payload})});return Object.assign({},e,{entries:a,entryIdsByConversationId:Object.assign({},e.entryIdsByConversationId,{[n]:T([...e.entryIdsByConversationId[n]||[],s],a)})})}case C:{const n=Object.values(t.payload).filter(e=>e.type!==i.b.CONVERSATION_READ).reduce((t,n)=>{const{id:s}=n,a=Object(p.a)(n,"message_reactions");return t.allEntries[s]=S(e.entries[s],{data:a,isLoading:!1,isLoaded:!0}),n.message_reactions&&(n.message_reactions.forEach(s=>{const a=Object.assign({},s,{affects_sort:!0,message_id:n.id,type:i.b.REACTION_CREATE});t.allEntries[a.id]=S(e.entries[a.id],{data:a,isLoading:!1,isLoaded:!0})}),t.embeddedReactionsByMessageId[s]=T([...e.reactionsByMessageId[s]||[],...n.message_reactions.map(e=>e.id)],Object.assign({},e.entries,t.allEntries))),t},{allEntries:{},embeddedReactionsByMessageId:{}}),s=Object.assign({},e.entries,n.allEntries),a=Object(_.a)(Object.values(n.allEntries),e=>e.data.conversation_id),r=Object.keys(a).reduce((t,n)=>{const r=a[n].map(e=>e.data.id);return t[n]=T([...e.entryIdsByConversationId[n]||[],...r],s),t},{});return Object.assign({},e,{entries:s,entryIdsByConversationId:Object.assign({},e.entryIdsByConversationId,r),reactionsByMessageId:Object.assign({},e.reactionsByMessageId,n.embeddedReactionsByMessageId)})}case I.REQUEST:case g.REQUEST:{const n=t.type===I.REQUEST,s=t.payload.reduce((t,s)=>{const a=e.entries[s]&&e.entries[s].data;return Object.assign({},t,{[s]:Object.assign({},e.entries[s],{data:Object.assign({},a,{marked_as_spam:n})})})},{});return Object.assign({},e,{entries:Object.assign({},e.entries,s)})}case f.REQUEST:case N:{const s=t.type===N&&!Array.isArray(t.payload),a=e.entryIdsByConversationId[n]||[],r=t.type===N?s?a:t.payload:[t.payload,...e.reactionsByMessageId[t.payload]||[]];return Object.assign({},e,{entries:Object(p.a)(e.entries,r),entryIdsByConversationId:Object.assign({},Object(p.a)(e.entryIdsByConversationId,n),s?{}:{[n]:Object(m.a)(a,r)}),reactionsByMessageId:Object(p.a)(e.reactionsByMessageId,r)})}case B:{const a=t.payload.id||s,r=Object.assign({},Object(p.a)(e.entries,a)),i=T((e.entryIdsByConversationId[n]||[]).filter(e=>e!==a),r),o=i?{[n]:i}:{};return Object.assign({},e,{entries:r,entryIdsByConversationId:Object.assign({},Object(p.a)(e.entryIdsByConversationId,n),o),reactionsByMessageId:Object(p.a)(e.reactionsByMessageId,a)})}case F:{const n=t.payload,s=[...e.reactionsByMessageId[n.message_id]||[],n.id],a=s.filter(t=>e.entries[t]);s.length!==a.length&&Object(o.a)("DM add reaction is missing a backing entry",{extra:{filteredMessageReactionIds:a,messageReactionIds:s,currentId:n.id}});const r=T(a,e.entries);return Object.assign({},e,{reactionsByMessageId:Object.assign({},e.reactionsByMessageId,{[n.message_id]:r})})}case y.REQUEST:case G:{const n=t.payload,s=(e.reactionsByMessageId[n.message_id]||[]).find(t=>e.entries[t].data.sender_id===n.sender_id);if(!s)return e;const a=Object(m.a)(e.entryIdsByConversationId[n.conversation_id],s),r=Object(m.a)(e.reactionsByMessageId[n.message_id],s);return Object.assign({},e,{entries:Object(p.a)(e.entries,s),entryIdsByConversationId:Object.assign({},e.entryIdsByConversationId,{[n.conversation_id]:a}),reactionsByMessageId:Object.assign({},e.reactionsByMessageId,{[n.message_id]:r})})}case c.a:return v;default:return e}}const S=(e,t)=>{const n=e||{},s=a()(n,["error","isLoaded","isLoading"]),r=t||{},{data:i}=r,o=a()(r,["data"]);return Object.assign({},s,{data:Object.assign({},s&&s.data,i)},o)},T=(e=[],t)=>{const n=Object(h.a)(e).sort((e,n)=>{const s=Object(r.a)(t[e].data.time,t[n].data.time);return 0===s?Object(r.a)(t[e].id,t[n].id):s});return n.length?n:void 0},C=Object(u.c)("ADD_ENTRIES"),j=e=>({payload:e,type:C}),x=e=>(t,n,{api:s})=>{const r=e||{},{id:i,conversationId:o,requestId:c=l.a.v1()}=r,d=a()(r,["id","conversationId","requestId"]),u=Object.assign({},d,{id:i,request_id:c});return Object(E.c)(t,{params:u,request:s.DirectMessages.deleteMessage})({actionTypes:f,context:"ACTION_DELETE_DM",payload:i,meta:{conversationId:o}})},R=e=>(t,n,{api:s})=>{const a=(({reaction_key:e,conversation_id:t,dm_id:n,perspective:s})=>({id:l.a.v1(),time:(new Date).getTime().toString(),reaction_key:e,conversation_id:t,message_id:n,sender_id:s,type:i.b.REACTION_CREATE}))(e);t([L(a.conversation_id,a.id,a),K(a),V(a)]);return Object(E.b)(t,{params:Object(p.a)(e,"perspective"),request:s.DirectMessages.addReaction})({actionTypes:O,context:"ACTION_REACTION_CREATE"},(e,t)=>{if(t)return[K(a)]})},D=e=>(t,n,{api:s})=>{const{perspective:r}=e,i=a()(e,["perspective"]);return Object(E.c)(t,{params:i,request:s.DirectMessages.deleteReaction})({actionTypes:y,context:"ACTION_REACTION_DELETE",payload:{conversation_id:e.conversation_id,message_id:e.dm_id,sender_id:r}})},N="rweb/dm/REMOVE_CONVERSATION_ENTRIES",M=(e,t)=>({meta:{conversationId:e},payload:t,type:N}),P=(e,t)=>({payload:e,type:t?I.REQUEST:g.REQUEST}),w=({conversationId:e,dmId:t,markSpam:n})=>(s,a,{api:r})=>Object(E.c)(s,{params:{dm_id:t,report_as:n?"spam":"not_spam"},request:r.DirectMessages.reportSpam})({actionTypes:n?f:g,payload:n?t:[t],meta:{conversationId:e}}),U=Object(u.c)("ADD_ENTRY"),L=(e,t,n)=>({meta:{conversationId:e,requestId:t},payload:n,type:U}),B=Object(u.c)("REMOVE_ENTRY"),k=(e,t,n)=>({meta:{conversationId:e,requestId:t},payload:n,type:B}),F=Object(u.c)("ADD_REACTION"),V=e=>({payload:e,type:F}),G=Object(u.c)("DELETE_REACTION"),K=e=>({payload:e,type:G}),q=e=>e[u.a].entries,H=(e,t)=>{const n=q(e).entries[t];return n&&n.data},W=(e,t)=>e[u.a].entries.entryIdsByConversationId[t],z=(e,t)=>{const n=W(e,t);return n?Object(b.a)(n.map(t=>H(e,t))):[]},Q=(e,t)=>q(e).reactionsByMessageId[t],Y=(e,t)=>(Q(e,t)||[]).map(t=>H(e,t).sender_id)},ude7:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("JtPf");var s=n("A0bJ"),a=n("hJBK"),r=n("1auM");const i=1,o=2,c=3,d=e=>{if(Object(r.b)(e)){if(e.isGif){const{img:t,width:n,height:r,orientation:i}=e;return Object(a.b)(t,n,r,i).then(e=>Object(a.a)(e),e=>{throw new s.a("Gif preview could not be generated",c)})}{const e=new s.a("The provided image must be a gif",o);return Promise.reject(e)}}{const e=new s.a("The provided file is not a valid image",i);return Promise.reject(e)}}},w3n3:function(e,t,n){"use strict";var s=n("ERkP"),a=n("/yvb"),r=(n("MLl7"),n("3XMw")),i=n.n(r),o=n("3rWK"),c=n("Irs7");const d=i.a.a4993fa1,l=s.createElement(o.a,null);t.a=({dmConversationId:e,enabled:t=!0,gifSearchKeySource:n,history:r,style:i,onPress:o})=>{const u=Object(c.b)(),p=s.useCallback(()=>{o&&o(),u.scribe({element:"found_media_button",action:"click"}),r.push({pathname:"/i/foundmedia/search",state:{gifSearchKeySource:n,dmConversationId:e}})},[e,u,n,r,o]);return s.createElement(a.a,{accessibilityLabel:d,disabled:!t,icon:l,onPress:p,size:"normal",style:[i],type:"text"})}},wpu3:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));n("kYxP");var s=n("SMZj"),a=n("1auM"),r=n("Olyj"),i=(n("S1qy"),n("s1N3")),o=n("lnti");const c=({inReplyToStatus:e,loggedInUserId:t,excludeReplyUser:n})=>{const{retweeted_status:s}=e,{entities:a}=s||e,{user:c}=e.retweeted_status||e,l=s?s.user:{},u=s?e.user:{},p=a.user_mentions||[],_=Object(r.a)(a.media||[]),m=d(s||e)||{},h={[l.id_str]:l,[u.id_str]:u,[c.id_str]:c,[m.id_str]:m};p.forEach(e=>{h[e.id_str]=e}),_.forEach(({user_id:e,name:t,screen_name:n})=>{h[e]={id_str:e,name:t,screen_name:n}});const b=Object(i.a)(Object(o.a)([l.id_str,u.id_str,c.id_str,...p.map(e=>e.id_str),..._.map(e=>e.user_id)])).filter(e=>e!==t);let E=t&&c.id_str===t?[t,...b]:b;return n&&(E=E.filter(e=>e!==c.id_str)),E.map(e=>h[e])},d=({card:e})=>{let t=null;if(e){const n=s.d(e.binding_values,"site");n&&e.users&&(t=e.users[n.id_str])}return t},l=({maxNumberOfPhotos:e})=>t=>{if(0===t.length)return!0;const n=t.some(e=>!!e.externalMediaDetails),s=!n&&t.some(e=>e.mediaFile&&e.mediaFile.isGif),r=t.some(e=>e.mediaFile&&!(e.mediaFile instanceof a.a)&&e.mediaFile.isVideo);if(s||n||r)return 1===t.length;{const n=t.length<=e,s=t.every(e=>e.mediaFile&&e.mediaFile.isImage);return n&&s}},u=l({maxNumberOfPhotos:4})},xCUF:function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return E})),n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return A}));n("IAdD"),n("JtPf"),n("kYxP");var s=n("LdEA"),a=n.n(s),r=n("oEOe"),i=n("aWyx"),o=n("k6jb"),c=n("P1r1"),d=n("AQ79"),l=n("uKEd"),u=n("xPna"),p=n("lRnM"),_=n("WVrH");const m=r.a(d.b,"FETCH_UPDATES"),h={isLoaded:!1,isLoading:!1};function b(e=h,t){switch(t.type){case m.REQUEST:return Object.assign({},e,{isLoading:!0});case m.FAILURE:return Object.assign({},e,{error:t.payload,isLoaded:!1,isLoading:!1});case m.SUCCESS:{const t=a()(e,["error"]);return Object.assign({},t,{isLoaded:!0,isLoading:!1})}case O:return Object.assign({},e,{cursor:t.payload});case I:return Object.assign({},e,{tertiaryInboxStatus:t.payload});case _.a:return h;default:return e}}const E=e=>(t,n,{api:s})=>{const{directMessages:i={}}=n();let{cursor:d}=i.updates||{};const l=e||{},{polling:p}=l,h=a()(l,["polling"]),{tertiaryInboxStatus:b}=i.updates||{};let E=!1;const f=p?{"x-twitter-polling":"true"}:{},O=Object(c.p)(n())?"on":"off";b?b!==O&&(d=null,E=!0):E=!0;const y=Object(u.i)(Object.assign({},h,{cursor:d}),n());return r.b(t,{params:y,headers:f,request:s.DirectMessages.fetchUserUpdates})({actionTypes:m,context:"FETCH_DM_USER_UPDATES",meta:{direction:Object(o.c)(e)}},e=>{if(e){const{entries:t,tweets:n,users:s,cards:a}=e.entities,{user_events:r,inbox_initial_state:i}=e.result;return[i&&Object(_.b)(),...Object(u.b)(Object.assign({},r||i,{entries:t,users:s,tweets:n,cards:a})),...r?v(Object.values(t||[])):[],E&&g(O)]}})},f=e=>(t,n)=>S(n())?Promise.resolve():t(E(e)),O=Object(d.c)("UPDATE_CURSOR"),y=e=>({payload:e,type:O}),I=Object(d.c)("UPDATE_TERTIARY_INBOX_STATUS"),g=e=>({payload:e,type:I}),v=(e=[])=>e.sort((e,t)=>e.id-t.id).reduce((e,t)=>{switch(t.type){case i.b.CONVERSATION_AVATAR_UPDATE:return[...e,Object(p.E)(t.conversation_id,t.conversation_avatar_image_https),Object(p.F)(t.conversation_id,t.id)].filter(e=>e);case i.b.CONVERSATION_NAME_UPDATE:return[...e,Object(p.H)(t),Object(p.F)(t.conversation_id,t.id)].filter(e=>e);case i.b.CONVERSATION_READ:return[...e,Object(p.q)(t.conversation_id,t.last_read_event_id)];case i.b.DISABLE_NOTIFICATIONS:case i.b.ENABLE_NOTIFICATIONS:{const n=t.type===i.b.ENABLE_NOTIFICATIONS;return[...e,Object(p.D)(t.conversation_id,n)]}case i.b.MARK_ALL_AS_READ:return[...e,Object(p.p)(t.last_read_event_id)];case i.b.MESSAGE_DELETE:return[...e,Object(l.i)(t.conversation_id,t.messages.reduce((e,t)=>[...e,...Object.values(t)],[]))];case i.b.MESSAGE_MARK_AS_NOT_SPAM:case i.b.MESSAGE_MARK_AS_SPAM:{const n=t.type===i.b.MESSAGE_MARK_AS_SPAM;return[...e,Object(l.r)(t.messages.reduce((e,t)=>[...e,...Object.values(t)],[]),n)]}case i.b.REMOVE_CONVERSATION:return[...e,...Object(p.s)(t.conversation_id)];case i.b.JOIN_CONVERSATION:case i.b.PARTICIPANTS_JOIN:case i.b.PARTICIPANTS_LEAVE:return[...e,Object(p.F)(t.conversation_id,t.id)];case i.b.REACTION_CREATE:return[...e,Object(l.g)(t),Object(l.c)(t),Object(p.F)(t.conversation_id,t.id)];case i.b.REACTION_DELETE:return[...e,Object(l.g)(t)];case i.b.MESSAGE:return[...e,Object(p.F)(t.conversation_id,t.id)].filter(e=>e);default:return e}},[]),A=e=>e[d.a].updates,S=e=>A(e).isLoading},xPna:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return S})),n.d(t,"i",(function(){return j})),n.d(t,"p",(function(){return x})),n.d(t,"s",(function(){return N})),n.d(t,"n",(function(){return M})),n.d(t,"m",(function(){return P})),n.d(t,"v",(function(){return w})),n.d(t,"x",(function(){return U})),n.d(t,"o",(function(){return L})),n.d(t,"r",(function(){return B})),n.d(t,"q",(function(){return k})),n.d(t,"t",(function(){return F})),n.d(t,"y",(function(){return V})),n.d(t,"u",(function(){return G})),n.d(t,"w",(function(){return K})),n.d(t,"d",(function(){return H})),n.d(t,"e",(function(){return W})),n.d(t,"g",(function(){return Q})),n.d(t,"h",(function(){return Y})),n.d(t,"f",(function(){return J})),n.d(t,"b",(function(){return $})),n.d(t,"C",(function(){return ee})),n.d(t,"D",(function(){return te})),n.d(t,"B",(function(){return ne})),n.d(t,"l",(function(){return ae})),n.d(t,"A",(function(){return oe})),n.d(t,"k",(function(){return ce})),n.d(t,"z",(function(){return ue})),n.d(t,"j",(function(){return pe}));n("IAdD"),n("JtPf"),n("kYxP");var s=n("LdEA"),a=n.n(s),r=n("oEOe"),i=n("/kEJ"),o=n("uKEd"),c=n("kGix"),d=n("YeIG"),l=n("aWyx"),u=n("WVrH"),p=n("xCUF"),_=n("AQ79"),m=n("lRnM"),h=n("t0aI"),b=n("P1r1");const E=r.a(_.b,"FETCH_INBOX"),f=r.a(_.b,"UPDATE_LAST_SEEN_EVENT_ID"),O="inbox",y="trusted",I="untrusted",g="untrusted_low_quality",v=Object.freeze({CLOSED:"closed",COLLAPSED:"collapsed",EXPANDED:"expanded"}),A={cursors:{[O]:{fetchStatus:c.a.NONE},[y]:{fetchStatus:c.a.NONE},[I]:{fetchStatus:c.a.NONE},[g]:{fetchStatus:c.a.NONE}},lastSeenEventIds:{},poppedOutConversationId:null,drawerVisibility:v.COLLAPSED,drawerExperimentEnabled:!1};function S(e=A,t){switch(t.type){case E.REQUEST:{const{timelineType:n}=t.meta;return Object.assign({},e,{cursors:Object.assign({},e.cursors,{[n]:Object.assign({},e.cursors[n],{fetchStatus:c.a.LOADING})})})}case E.FAILURE:{const{timelineType:n}=t.meta;return Object.assign({},e,{cursors:Object.assign({},e.cursors,{[n]:Object.assign({},e.cursors[n],{error:t.payload,fetchStatus:c.a.FAILED})})})}case E.SUCCESS:{const{timelineType:n}=t.meta;return Object.assign({},e,{cursors:Object.assign({},e.cursors,{[n]:Object.assign({},e.cursors[n],{error:void 0,fetchStatus:c.a.LOADED})})})}case X:return Object.assign({},e,{cursors:Object.assign({},e.cursors,t.payload.cursors),lastSeenEventIds:T(e.lastSeenEventIds,t.payload.lastSeenEventIds)});case f.REQUEST:return Object.assign({},e,{lastSeenEventIds:Object.assign({},e.lastSeenEventIds,t.meta.lastSeenEventIds)});case u.a:return Object.assign({},A,{cursors:Object.assign({},A.cursors,{inbox:e.cursors.inbox})});case se:return Object.assign({},e,{poppedOutConversationId:t.conversationId,drawerVisibility:v.EXPANDED});case re:return Object.assign({},e,{drawerVisibility:t.visibility});case de:return Object.assign({},e,{drawerExperimentEnabled:t.enabled});default:return e}}const T=(e,t)=>({last_seen_event_id:C(e.last_seen_event_id,t.last_seen_event_id),trusted_last_seen_event_id:C(e.trusted_last_seen_event_id,t.trusted_last_seen_event_id),untrusted_last_seen_event_id:C(e.untrusted_last_seen_event_id,t.untrusted_last_seen_event_id)}),C=(e,t)=>Object(h.c)(e,t)?e:t,j=(e,t,n="all")=>{const s=Object(b.o)(t);return Object(b.p)(t)?Object.assign({},e,{filter_low_quality:s,include_quality:n}):Object.assign({},e,{filter_low_quality:s})},x=e=>e[_.a].inbox,R=e=>x(e).cursors,D=e=>x(e).lastSeenEventIds,N=e=>x(e).poppedOutConversationId,M=e=>x(e).drawerVisibility,P=e=>x(e).drawerExperimentEnabled,w=e=>R(e)[I],U=e=>R(e)[g],L=e=>(e=>R(e)[O])(e).fetchStatus,B=e=>L(e)===c.a.LOADING,k=e=>L(e)===c.a.LOADED,F=e=>{const t=Object(b.p)(e),n=Object.values(Object(m.B)(e)),s=t?n.filter(({data:{low_quality:e,trusted:t}})=>t||!e):n,{last_seen_event_id:a}=D(e);return q(e,s,a)},V=e=>{const t=Object(b.p)(e),{untrusted_last_seen_event_id:n}=D(e),s=Object.values(Object(m.B)(e)),a=t?s.filter(({data:{trusted:e,low_quality:t}})=>!e&&!t):s.filter(({data:{trusted:e}})=>!e);return q(e,a,n)},G=e=>Object.values(Object(m.B)(e)).filter(({data:{trusted:e}})=>!e).length,K=e=>Object.values(Object(m.B)(e)).filter(({data:{trusted:e,low_quality:t}})=>!e&&t).length,q=(e,t,n)=>n?t.reduce((t,{data:{conversation_id:s}})=>{const a=Object(m.A)(e,s),r=Object(m.z)(e,s);return a&&Object(h.b)(a,n)&&!r?t+1:t},0):0,H=(e={})=>(t,n,{api:s})=>{const a=j(e,n());return r.b(t,{params:a,request:s.DirectMessages.fetchUserInbox})({actionTypes:E,context:"FETCH_DM_INBOX",meta:{timelineType:O}},e=>{if(e){const{entries:t,users:n,tweets:s,cards:a}=e.entities;return $(Object.assign({},e.result.inbox_initial_state,{entries:t,users:n,tweets:s,cards:a}))}})},W=(e={})=>(t,n)=>{const s=n(),a=L(s);return a!==c.a.LOADED&&a!==c.a.LOADING?t(H(e)):Promise.resolve()},z=(e,t)=>(n,s,{api:a})=>{const{status:i,min_entry_id:o}=R(s())[e],c=e===g?I:e,d=Object.assign({},t,{max_id:o,timelineType:c});if(i!==l.c.HAS_MORE)return Promise.resolve();return r.b(n,{params:d,request:a.DirectMessages.fetchInboxHistory})({actionTypes:E,context:"FETCH_DM_INBOX_HISTORY",meta:{timelineType:e}},t=>{if(t){const{entries:n,users:s,tweets:a,cards:r}=t.entities,{inbox_timeline:i}=t.result;return $({conversations:i.conversations,inbox_timelines:{[e]:i},entries:n,users:s,tweets:a,cards:r})}})},Q=e=>(t,n)=>{const s=j(e,n(),"high");return t(z(I,s))},Y=e=>(t,n)=>{const s=j(e,n(),"low");return t(z(g,s))},J=e=>(t,n)=>{const s=j(e,n());return t(z(y,s))},X=Object(_.c)("UPDATE_INBOX"),Z=e=>{const{inbox_timelines:t}=e;return{payload:{cursors:t,lastSeenEventIds:a()(e,["inbox_timelines"])},type:X}},$=(e={})=>{const{conversations:t,entries:n,users:s,tweets:r,cards:c,cursor:l}=e,u=a()(e,["conversations","entries","users","tweets","cards","cursor"]);return[Object(i.c)({cards:c,tweets:r,users:s}),!Object(d.a)(t)&&Object(m.c)(t),!Object(d.a)(n)&&Object(o.a)(n),!Object(d.a)(l)&&Object(p.f)(l),!Object(d.a)(u)&&Z(u)].filter(e=>e)},ee=()=>e=>e(ne({withTrusted:!0})),te=()=>e=>e(ne({withUntrusted:!0})),ne=({withTrusted:e,withUntrusted:t}={})=>(n,s,{api:a})=>{const i=s(),o=Object(m.B)(i),c=D(i),{last_seen_event_id:d,trusted_last_seen_event_id:l,untrusted_last_seen_event_id:u}=c,p=Object.values(o).reduce((e,{data:{sort_event_id:t,trusted:n}})=>(e.last_seen_event_id=C(e.last_seen_event_id,t),e.trusted_last_seen_event_id=n?C(e.trusted_last_seen_event_id,t):e.trusted_last_seen_event_id,e.untrusted_last_seen_event_id=n?e.untrusted_last_seen_event_id:C(e.untrusted_last_seen_event_id,t),e),Object.assign({},c));if(Object(h.b)(p.last_seen_event_id,d)||e&&Object(h.b)(p.trusted_last_seen_event_id,l)||t&&Object(h.b)(p.untrusted_last_seen_event_id,u)){e||delete p.trusted_last_seen_event_id,t||delete p.untrusted_last_seen_event_id;return r.c(n,{params:p,request:a.DirectMessages.updateLastSeenEventId})({actionTypes:f,context:"APP_DM_UPDATE_LAST_SEEN",meta:{lastSeenEventIds:p}})}return Promise.resolve()},se=Object(_.c)("POP_OUT_CONVERSATION"),ae=e=>(t,n,{userPersistence:s})=>(s.set("rweb.dmDrawerVisibility",{visibility:v.EXPANDED}),t({conversationId:e,type:se})),re=Object(_.c)("SET_DRAWER_VISIBILITY"),ie=e=>({visibility:e,type:re}),oe=e=>(t,n,{userPersistence:s})=>(s.set("rweb.dmDrawerVisibility",{visibility:e}),e===v.CLOSED&&t({type:se}),t(ie(e))),ce=()=>(e,t,{userPersistence:n})=>n.get("rweb.dmDrawerVisibility").then(t=>{t&&e(ie(t.visibility))}),de=Object(_.c)("SET_DRAWER_EXPERIMENT_ENABLED"),le=e=>({enabled:e,type:de}),ue=e=>(t,n,{userPersistence:s})=>(s.set("rweb.dmQuickAccessEnabled",{enabled:e}),t(le(e))),pe=()=>(e,t,{userPersistence:n})=>n.get("rweb.dmQuickAccessEnabled").then(t=>{t&&e(le(t.enabled))})}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.DMDrawer~bundle.Compose~bundle.RichTextCompose~bundle.DirectMessages~bundle.DMRichTextCompose~b.99556555.js.map